{"ast":null,"code":"var _jsxFileName = \"D:\\\\Stratix\\\\frontend\\\\src\\\\components\\\\Auth\\\\navbarcomponents\\\\Avatar.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Camera, Upload, User, X, Check, AlertCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Avatar = ({\n  src,\n  alt,\n  size = 'w-10 h-10',\n  className = '',\n  fallbackText = 'U',\n  editable = false,\n  onAvatarChange,\n  user\n}) => {\n  _s();\n  const [imageError, setImageError] = useState(false);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState(null);\n  const [uploadError, setUploadError] = useState(null);\n  const fileInputRef = useRef(null);\n\n  // Handle image upload\n  const handleFileSelect = event => {\n    var _event$target$files;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      setUploadError('Vui lòng chọn file hình ảnh');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      setUploadError('File không được vượt quá 5MB');\n      return;\n    }\n    setUploadError(null);\n\n    // Create preview URL\n    const reader = new FileReader();\n    reader.onload = e => {\n      setPreviewUrl(e.target.result);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  // Upload avatar to server\n  const handleUploadConfirm = async () => {\n    var _fileInputRef$current, _fileInputRef$current2;\n    if (!((_fileInputRef$current = fileInputRef.current) !== null && _fileInputRef$current !== void 0 && (_fileInputRef$current2 = _fileInputRef$current.files) !== null && _fileInputRef$current2 !== void 0 && _fileInputRef$current2[0])) return;\n    setUploading(true);\n    setUploadError(null);\n    try {\n      const file = fileInputRef.current.files[0];\n      const formData = new FormData();\n      formData.append('avatar', file);\n      formData.append('userId', user === null || user === void 0 ? void 0 : user.id);\n\n      // Call API to upload avatar\n      const response = await fetch('/api/users/avatar', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error('Không thể tải lên avatar');\n      }\n      const data = await response.json();\n\n      // Update avatar URL\n      if (onAvatarChange) {\n        onAvatarChange(data.avatar_url);\n      }\n      setShowUploadModal(false);\n      setPreviewUrl(null);\n      setImageError(false);\n    } catch (error) {\n      console.error('Avatar upload error:', error);\n      setUploadError(error.message || 'Có lỗi xảy ra khi tải lên avatar');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Reset upload state\n  const handleUploadCancel = () => {\n    setShowUploadModal(false);\n    setPreviewUrl(null);\n    setUploadError(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // Open file selector\n  const handleEditClick = () => {\n    if (editable) {\n      setShowUploadModal(true);\n    }\n  };\n\n  // Render avatar image or fallback\n  const renderAvatar = (imageUrl, isPreview = false) => {\n    if (!imageUrl || imageError && !isPreview) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${size} bg-gradient-to-br from-gray-700 to-gray-900 rounded-full flex items-center justify-center ${className} ${editable ? 'cursor-pointer hover:ring-2 hover:ring-amber-400 hover:ring-offset-2 transition-all duration-200' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-white text-sm font-bold\",\n          children: fallbackText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"img\", {\n      src: imageUrl,\n      alt: alt,\n      className: `${size} rounded-full object-cover border border-gray-200 ${className} ${editable ? 'cursor-pointer hover:ring-2 hover:ring-amber-400 hover:ring-offset-2 transition-all duration-200' : ''}`,\n      onError: () => !isPreview && setImageError(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative inline-block\",\n      onClick: handleEditClick,\n      children: [renderAvatar(src), editable && /*#__PURE__*/_jsxDEV(motion.div, {\n        whileHover: {\n          scale: 1.1\n        },\n        className: \"absolute -bottom-1 -right-1 w-6 h-6 bg-amber-400 rounded-full flex items-center justify-center shadow-lg cursor-pointer\",\n        children: /*#__PURE__*/_jsxDEV(Camera, {\n          className: \"w-3 h-3 text-white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: showUploadModal && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        exit: {\n          opacity: 0\n        },\n        className: \"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\",\n        onClick: handleUploadCancel,\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            scale: 0.95,\n            opacity: 0\n          },\n          animate: {\n            scale: 1,\n            opacity: 1\n          },\n          exit: {\n            scale: 0.95,\n            opacity: 0\n          },\n          className: \"bg-white rounded-2xl shadow-xl w-full max-w-md p-6\",\n          onClick: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-900\",\n              children: \"\\u0110\\u1ED5i avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUploadCancel,\n              className: \"p-2 hover:bg-gray-100 rounded-full transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(X, {\n                className: \"w-5 h-5 text-gray-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center mb-6\",\n            children: previewUrl ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [renderAvatar(previewUrl, true), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 rounded-full bg-black/20 flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(Check, {\n                  className: \"w-8 h-8 text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 37\n            }, this) : renderAvatar(src)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              ref: fileInputRef,\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleFileSelect,\n              className: \"hidden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _fileInputRef$current3;\n                return (_fileInputRef$current3 = fileInputRef.current) === null || _fileInputRef$current3 === void 0 ? void 0 : _fileInputRef$current3.click();\n              },\n              className: \"w-full flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-amber-400 hover:bg-amber-50 transition-all duration-200\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                className: \"w-5 h-5 text-gray-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-700 font-medium\",\n                children: previewUrl ? 'Chọn ảnh khác' : 'Chọn ảnh từ máy tính'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-2 text-center\",\n              children: \"H\\u1ED7 tr\\u1EE3 JPG, PNG. T\\u1ED1i \\u0111a 5MB.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 29\n          }, this), uploadError && /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              opacity: 0,\n              y: -10\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            className: \"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-red-700\",\n              children: uploadError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUploadCancel,\n              className: \"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\",\n              disabled: uploading,\n              children: \"H\\u1EE7y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUploadConfirm,\n              disabled: !previewUrl || uploading,\n              className: \"flex-1 px-4 py-2 bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 text-white rounded-xl font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\",\n              children: uploading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u0110ang t\\u1EA3i l\\xEAn...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"C\\u1EADp nh\\u1EADt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(Avatar, \"/I8W3ueoecapkv1ywUIn5JVQu3I=\");\n_c = Avatar;\nexport default Avatar;\nvar _c;\n$RefreshReg$(_c, \"Avatar\");","map":{"version":3,"names":["React","useState","useRef","motion","AnimatePresence","Camera","Upload","User","X","Check","AlertCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","Avatar","src","alt","size","className","fallbackText","editable","onAvatarChange","user","_s","imageError","setImageError","showUploadModal","setShowUploadModal","uploading","setUploading","previewUrl","setPreviewUrl","uploadError","setUploadError","fileInputRef","handleFileSelect","event","_event$target$files","file","target","files","type","startsWith","reader","FileReader","onload","e","result","readAsDataURL","handleUploadConfirm","_fileInputRef$current","_fileInputRef$current2","current","formData","FormData","append","id","response","fetch","method","headers","localStorage","getItem","body","ok","Error","data","json","avatar_url","error","console","message","handleUploadCancel","value","handleEditClick","renderAvatar","imageUrl","isPreview","children","fileName","_jsxFileName","lineNumber","columnNumber","onError","onClick","div","whileHover","scale","initial","opacity","animate","exit","stopPropagation","ref","accept","onChange","_fileInputRef$current3","click","y","disabled","_c","$RefreshReg$"],"sources":["D:/Stratix/frontend/src/components/Auth/navbarcomponents/Avatar.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Camera, Upload, User, X, Check, AlertCircle } from 'lucide-react';\r\n\r\nconst Avatar = ({\r\n    src,\r\n    alt,\r\n    size = 'w-10 h-10',\r\n    className = '',\r\n    fallbackText = 'U',\r\n    editable = false,\r\n    onAvatarChange,\r\n    user\r\n}) => {\r\n    const [imageError, setImageError] = useState(false);\r\n    const [showUploadModal, setShowUploadModal] = useState(false);\r\n    const [uploading, setUploading] = useState(false);\r\n    const [previewUrl, setPreviewUrl] = useState(null);\r\n    const [uploadError, setUploadError] = useState(null);\r\n    const fileInputRef = useRef(null);\r\n\r\n    // Handle image upload\r\n    const handleFileSelect = (event) => {\r\n        const file = event.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        // Validate file type\r\n        if (!file.type.startsWith('image/')) {\r\n            setUploadError('Vui lòng chọn file hình ảnh');\r\n            return;\r\n        }\r\n\r\n        // Validate file size (max 5MB)\r\n        if (file.size > 5 * 1024 * 1024) {\r\n            setUploadError('File không được vượt quá 5MB');\r\n            return;\r\n        }\r\n\r\n        setUploadError(null);\r\n\r\n        // Create preview URL\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            setPreviewUrl(e.target.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    };\r\n\r\n    // Upload avatar to server\r\n    const handleUploadConfirm = async () => {\r\n        if (!fileInputRef.current?.files?.[0]) return;\r\n\r\n        setUploading(true);\r\n        setUploadError(null);\r\n\r\n        try {\r\n            const file = fileInputRef.current.files[0];\r\n            const formData = new FormData();\r\n            formData.append('avatar', file);\r\n            formData.append('userId', user?.id);\r\n\r\n            // Call API to upload avatar\r\n            const response = await fetch('/api/users/avatar', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n                },\r\n                body: formData,\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Không thể tải lên avatar');\r\n            }\r\n\r\n            const data = await response.json();\r\n\r\n            // Update avatar URL\r\n            if (onAvatarChange) {\r\n                onAvatarChange(data.avatar_url);\r\n            }\r\n\r\n            setShowUploadModal(false);\r\n            setPreviewUrl(null);\r\n            setImageError(false);\r\n\r\n        } catch (error) {\r\n            console.error('Avatar upload error:', error);\r\n            setUploadError(error.message || 'Có lỗi xảy ra khi tải lên avatar');\r\n        } finally {\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    // Reset upload state\r\n    const handleUploadCancel = () => {\r\n        setShowUploadModal(false);\r\n        setPreviewUrl(null);\r\n        setUploadError(null);\r\n        if (fileInputRef.current) {\r\n            fileInputRef.current.value = '';\r\n        }\r\n    };\r\n\r\n    // Open file selector\r\n    const handleEditClick = () => {\r\n        if (editable) {\r\n            setShowUploadModal(true);\r\n        }\r\n    };\r\n\r\n    // Render avatar image or fallback\r\n    const renderAvatar = (imageUrl, isPreview = false) => {\r\n        if (!imageUrl || (imageError && !isPreview)) {\r\n            return (\r\n                <div className={`${size} bg-gradient-to-br from-gray-700 to-gray-900 rounded-full flex items-center justify-center ${className} ${editable ? 'cursor-pointer hover:ring-2 hover:ring-amber-400 hover:ring-offset-2 transition-all duration-200' : ''}`}>\r\n                    <span className=\"text-white text-sm font-bold\">{fallbackText}</span>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <img\r\n                src={imageUrl}\r\n                alt={alt}\r\n                className={`${size} rounded-full object-cover border border-gray-200 ${className} ${editable ? 'cursor-pointer hover:ring-2 hover:ring-amber-400 hover:ring-offset-2 transition-all duration-200' : ''}`}\r\n                onError={() => !isPreview && setImageError(true)}\r\n            />\r\n        );\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"relative inline-block\" onClick={handleEditClick}>\r\n                {renderAvatar(src)}\r\n\r\n                {/* Edit indicator */}\r\n                {editable && (\r\n                    <motion.div\r\n                        whileHover={{ scale: 1.1 }}\r\n                        className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-amber-400 rounded-full flex items-center justify-center shadow-lg cursor-pointer\"\r\n                    >\r\n                        <Camera className=\"w-3 h-3 text-white\" />\r\n                    </motion.div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Upload Modal */}\r\n            <AnimatePresence>\r\n                {showUploadModal && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\"\r\n                        onClick={handleUploadCancel}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.95, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.95, opacity: 0 }}\r\n                            className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-6\"\r\n                            onClick={(e) => e.stopPropagation()}\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <h3 className=\"text-lg font-semibold text-gray-900\">Đổi avatar</h3>\r\n                                <button\r\n                                    onClick={handleUploadCancel}\r\n                                    className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n                                >\r\n                                    <X className=\"w-5 h-5 text-gray-500\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Preview */}\r\n                            <div className=\"flex justify-center mb-6\">\r\n                                {previewUrl ? (\r\n                                    <div className=\"relative\">\r\n                                        {renderAvatar(previewUrl, true)}\r\n                                        <div className=\"absolute inset-0 rounded-full bg-black/20 flex items-center justify-center\">\r\n                                            <Check className=\"w-8 h-8 text-white\" />\r\n                                        </div>\r\n                                    </div>\r\n                                ) : (\r\n                                    renderAvatar(src)\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* File Input */}\r\n                            <div className=\"mb-6\">\r\n                                <input\r\n                                    ref={fileInputRef}\r\n                                    type=\"file\"\r\n                                    accept=\"image/*\"\r\n                                    onChange={handleFileSelect}\r\n                                    className=\"hidden\"\r\n                                />\r\n                                <button\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                    className=\"w-full flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-amber-400 hover:bg-amber-50 transition-all duration-200\"\r\n                                >\r\n                                    <Upload className=\"w-5 h-5 text-gray-500\" />\r\n                                    <span className=\"text-gray-700 font-medium\">\r\n                                        {previewUrl ? 'Chọn ảnh khác' : 'Chọn ảnh từ máy tính'}\r\n                                    </span>\r\n                                </button>\r\n                                <p className=\"text-xs text-gray-500 mt-2 text-center\">\r\n                                    Hỗ trợ JPG, PNG. Tối đa 5MB.\r\n                                </p>\r\n                            </div>\r\n\r\n                            {/* Error Message */}\r\n                            {uploadError && (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0, y: -10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-2\"\r\n                                >\r\n                                    <AlertCircle className=\"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0\" />\r\n                                    <p className=\"text-sm text-red-700\">{uploadError}</p>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Actions */}\r\n                            <div className=\"flex space-x-3\">\r\n                                <button\r\n                                    onClick={handleUploadCancel}\r\n                                    className=\"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\r\n                                    disabled={uploading}\r\n                                >\r\n                                    Hủy\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleUploadConfirm}\r\n                                    disabled={!previewUrl || uploading}\r\n                                    className=\"flex-1 px-4 py-2 bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 text-white rounded-xl font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\r\n                                >\r\n                                    {uploading ? (\r\n                                        <>\r\n                                            <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                                            <span>Đang tải lên...</span>\r\n                                        </>\r\n                                    ) : (\r\n                                        <span>Cập nhật</span>\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Avatar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}