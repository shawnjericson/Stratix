{"ast":null,"code":"var _jsxFileName = \"D:\\\\Stratix\\\\frontend\\\\src\\\\components\\\\Tasks\\\\TaskForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Calendar, Clock, Flag, User, FileText, AlertCircle, Plus, Edit3 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TaskForm({\n  task,\n  currentUser,\n  onSave,\n  onCancel,\n  isLoading = false\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    status: 'todo',\n    priority: 'medium',\n    start_date: '',\n    due_date: '',\n    estimated_hours: '',\n    assigned_to: '',\n    category_id: '',\n    department_id: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const isEditing = !!task;\n\n  // Khởi tạo form data\n  useEffect(() => {\n    console.log('=== FORM INIT DEBUG ===');\n    console.log('Task prop:', task);\n    console.log('Current user prop:', currentUser);\n    if (task) {\n      // Editing existing task - convert từ PostgreSQL format\n      const taskFormData = {\n        id: task.id,\n        title: task.title || '',\n        description: task.description || '',\n        status: task.status || 'todo',\n        priority: task.priority || 'medium',\n        start_date: task.start_date ? task.start_date.split('T')[0] : '',\n        due_date: task.due_date ? task.due_date.split('T')[0] : '',\n        estimated_hours: task.estimated_hours || '',\n        assigned_to: task.assigned_to || (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) || '',\n        category_id: task.category_id || '',\n        department_id: task.department_id || (currentUser === null || currentUser === void 0 ? void 0 : currentUser.department_id) || ''\n      };\n      console.log('Setting form data for editing:', taskFormData);\n      setFormData(taskFormData);\n    } else {\n      // Creating new task\n      const newTaskFormData = {\n        title: '',\n        description: '',\n        status: 'todo',\n        priority: 'medium',\n        start_date: '',\n        due_date: '',\n        estimated_hours: '',\n        assigned_to: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) || '',\n        category_id: '',\n        department_id: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.department_id) || ''\n      };\n      console.log('Setting form data for new task:', newTaskFormData);\n      setFormData(newTaskFormData);\n    }\n  }, [task, currentUser]);\n\n  // Validation functions\n  const validateField = (name, value) => {\n    switch (name) {\n      case 'title':\n        if (!(value !== null && value !== void 0 && value.trim())) return 'Tiêu đề là bắt buộc';\n        if (value.length < 3) return 'Tiêu đề phải có ít nhất 3 ký tự';\n        if (value.length > 200) return 'Tiêu đề không được vượt quá 200 ký tự';\n        return '';\n      case 'description':\n        if (value && value.length > 2000) return 'Mô tả không được vượt quá 2000 ký tự';\n        return '';\n      case 'estimated_hours':\n        if (value && (isNaN(value) || value < 1 || value > 1000)) {\n          return 'Số giờ ước tính phải từ 1-1000';\n        }\n        return '';\n      case 'start_date':\n      case 'due_date':\n        if (value && isNaN(new Date(value))) {\n          return 'Ngày không hợp lệ';\n        }\n        return '';\n      default:\n        return '';\n    }\n  };\n  const validateDates = () => {\n    const errors = {};\n    const {\n      start_date,\n      due_date\n    } = formData;\n    if (start_date && due_date) {\n      const start = new Date(start_date);\n      const due = new Date(due_date);\n      if (start > due) {\n        errors.start_date = 'Ngày bắt đầu không thể sau ngày kết thúc';\n        errors.due_date = 'Ngày kết thúc không thể trước ngày bắt đầu';\n      }\n    }\n    if (due_date && !isEditing) {\n      const due = new Date(due_date);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      if (due < today) {\n        errors.due_date = 'Ngày hết hạn không thể là ngày trong quá khứ';\n      }\n    }\n    return errors;\n  };\n\n  // Handle input changes\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Clear errors when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n\n    // Validate field if it's been touched\n    if (touched[name]) {\n      const error = validateField(name, value);\n      setErrors(prev => ({\n        ...prev,\n        [name]: error\n      }));\n    }\n  };\n  const handleInputBlur = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setTouched(prev => ({\n      ...prev,\n      [name]: true\n    }));\n    const error = validateField(name, value);\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  };\n\n  // Handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log('=== FORM SUBMIT DEBUG ===');\n    console.log('Raw form data:', formData);\n    console.log('Current user:', currentUser);\n\n    // Validate all fields\n    const newErrors = {};\n    const newTouched = {};\n\n    // Required fields validation\n    Object.keys(formData).forEach(key => {\n      newTouched[key] = true;\n      const error = validateField(key, formData[key]);\n      if (error) newErrors[key] = error;\n    });\n\n    // Date validation\n    const dateErrors = validateDates();\n    Object.assign(newErrors, dateErrors);\n    setTouched(newTouched);\n    setErrors(newErrors);\n\n    // Stop if there are errors\n    if (Object.keys(newErrors).length > 0) {\n      console.log('Form validation errors:', newErrors);\n      return;\n    }\n    try {\n      // Prepare data for API - PostgreSQL format\n      const taskData = {\n        // Include ID if editing\n        ...(isEditing && {\n          id: formData.id\n        }),\n        // Basic fields\n        title: formData.title.trim(),\n        description: formData.description.trim(),\n        status: formData.status,\n        priority: formData.priority,\n        // Dates - null if empty\n        start_date: formData.start_date || null,\n        due_date: formData.due_date || null,\n        // Numbers - null if empty, convert to int if not\n        estimated_hours: formData.estimated_hours ? parseInt(formData.estimated_hours, 10) : null,\n        // User assignment - ensure we have a valid user ID\n        assigned_to: formData.assigned_to ? parseInt(formData.assigned_to, 10) : (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) || null,\n        // Categories - null if empty, convert to int if not\n        category_id: formData.category_id ? parseInt(formData.category_id, 10) : null,\n        department_id: formData.department_id ? parseInt(formData.department_id, 10) : (currentUser === null || currentUser === void 0 ? void 0 : currentUser.department_id) || null\n      };\n      console.log('Processed task data for API:', taskData);\n\n      // Validate required user context\n      if (!currentUser || !currentUser.id) {\n        throw new Error('Thông tin người dùng không hợp lệ. Vui lòng đăng nhập lại.');\n      }\n      await onSave(taskData);\n    } catch (error) {\n      console.error('Form submission error:', error);\n\n      // Hiển thị lỗi chi tiết hơn\n      let errorMessage = 'Có lỗi xảy ra khi lưu công việc';\n      if (error.message.includes('Failed to create task')) {\n        errorMessage = 'Không thể tạo công việc. Vui lòng kiểm tra kết nối mạng và thử lại.';\n      } else if (error.message.includes('Failed to update task')) {\n        errorMessage = 'Không thể cập nhật công việc. Vui lòng thử lại.';\n      } else if (error.message.includes('fetch')) {\n        errorMessage = 'Không thể kết nối đến server. Vui lòng kiểm tra server có đang chạy không.';\n      } else if (error.message.includes('người dùng')) {\n        errorMessage = error.message;\n      }\n      setErrors({\n        submit: errorMessage\n      });\n    }\n  };\n  const handleCancel = () => {\n    onCancel();\n  };\n\n  // Đảm bảo có user context\n  if (!currentUser) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"w-12 h-12 text-red-500 mx-auto mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-2\",\n        children: \"Kh\\xF4ng c\\xF3 th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-4\",\n        children: \"Vui l\\xF2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 s\\u1EED d\\u1EE5ng t\\xEDnh n\\u0103ng n\\xE0y.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCancel,\n        className: \"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\",\n        children: \"\\u0110\\xF3ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-6 border-b border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2 bg-blue-100 rounded-lg\",\n          children: isEditing ? /*#__PURE__*/_jsxDEV(Edit3, {\n            className: \"w-5 h-5 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-5 h-5 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-900\",\n            children: isEditing ? 'Chỉnh sửa công việc' : 'Tạo công việc mới'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: isEditing ? 'Cập nhật thông tin công việc' : 'Điền thông tin để tạo công việc mới'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCancel,\n        disabled: isLoading,\n        className: \"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\",\n        title: \"\\u0110\\xF3ng\",\n        children: /*#__PURE__*/_jsxDEV(X, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"p-6 space-y-6\",\n      children: [errors.submit && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-red-900\",\n            children: \"C\\xF3 l\\u1ED7i x\\u1EA3y ra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-red-700 mt-1\",\n            children: errors.submit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-blue-50 border border-blue-200 rounded-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2 text-sm text-blue-800\",\n          children: [/*#__PURE__*/_jsxDEV(User, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Ng\\u01B0\\u1EDDi t\\u1EA1o: \", currentUser.full_name || currentUser.username, \" (ID: \", currentUser.id, \")\", currentUser.department_id && ` | Phòng ban: ${currentUser.department_id}`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          className: \"block text-sm font-medium text-gray-700 mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            className: \"w-4 h-4 inline mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 25\n          }, this), \"Ti\\xEAu \\u0111\\u1EC1 c\\xF4ng vi\\u1EC7c *\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"title\",\n          name: \"title\",\n          value: formData.title,\n          onChange: handleInputChange,\n          onBlur: handleInputBlur,\n          className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${errors.title && touched.title ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300'}`,\n          placeholder: \"Nh\\u1EADp ti\\xEAu \\u0111\\u1EC1 c\\xF4ng vi\\u1EC7c...\",\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 21\n        }, this), errors.title && touched.title && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-red-600 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"w-4 h-4 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 29\n          }, this), errors.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"description\",\n          className: \"block text-sm font-medium text-gray-700 mb-2\",\n          children: \"M\\xF4 t\\u1EA3 c\\xF4ng vi\\u1EC7c\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"description\",\n          name: \"description\",\n          rows: 4,\n          value: formData.description,\n          onChange: handleInputChange,\n          onBlur: handleInputBlur,\n          className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none ${errors.description && touched.description ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300'}`,\n          placeholder: \"M\\xF4 t\\u1EA3 chi ti\\u1EBFt v\\u1EC1 c\\xF4ng vi\\u1EC7c...\",\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }, this), errors.description && touched.description && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-red-600 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"w-4 h-4 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 29\n          }, this), errors.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"status\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"status\",\n            name: \"status\",\n            value: formData.status,\n            onChange: handleInputChange,\n            className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",\n            disabled: isLoading,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"todo\",\n              children: \"Ch\\u1EDD l\\xE0m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"in_progress\",\n              children: \"\\u0110ang l\\xE0m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"review\",\n              children: \"\\u0110ang duy\\u1EC7t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"completed\",\n              children: \"Ho\\xE0n th\\xE0nh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cancelled\",\n              children: \"\\u0110\\xE3 h\\u1EE7y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"priority\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(Flag, {\n              className: \"w-4 h-4 inline mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 29\n            }, this), \"\\u0110\\u1ED9 \\u01B0u ti\\xEAn\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"priority\",\n            name: \"priority\",\n            value: formData.priority,\n            onChange: handleInputChange,\n            className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",\n            disabled: isLoading,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"low\",\n              children: \"Th\\u1EA5p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"medium\",\n              children: \"Trung b\\xECnh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"high\",\n              children: \"Cao\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"urgent\",\n              children: \"Kh\\u1EA9n c\\u1EA5p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"start_date\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(Calendar, {\n              className: \"w-4 h-4 inline mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 29\n            }, this), \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            id: \"start_date\",\n            name: \"start_date\",\n            value: formData.start_date,\n            onChange: handleInputChange,\n            onBlur: handleInputBlur,\n            className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${errors.start_date && touched.start_date ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300'}`,\n            disabled: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 25\n          }, this), errors.start_date && touched.start_date && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-sm text-red-600 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"w-4 h-4 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 33\n            }, this), errors.start_date]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"due_date\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(Calendar, {\n              className: \"w-4 h-4 inline mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 29\n            }, this), \"Ng\\xE0y h\\u1EBFt h\\u1EA1n\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            id: \"due_date\",\n            name: \"due_date\",\n            value: formData.due_date,\n            onChange: handleInputChange,\n            onBlur: handleInputBlur,\n            className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${errors.due_date && touched.due_date ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300'}`,\n            disabled: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 25\n          }, this), errors.due_date && touched.due_date && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-sm text-red-600 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"w-4 h-4 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 33\n            }, this), errors.due_date]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"estimated_hours\",\n          className: \"block text-sm font-medium text-gray-700 mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(Clock, {\n            className: \"w-4 h-4 inline mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 25\n          }, this), \"S\\u1ED1 gi\\u1EDD \\u01B0\\u1EDBc t\\xEDnh\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"estimated_hours\",\n          name: \"estimated_hours\",\n          min: \"1\",\n          max: \"1000\",\n          value: formData.estimated_hours,\n          onChange: handleInputChange,\n          onBlur: handleInputBlur,\n          className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${errors.estimated_hours && touched.estimated_hours ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300'}`,\n          placeholder: \"Nh\\u1EADp s\\u1ED1 gi\\u1EDD \\u01B0\\u1EDBc t\\xEDnh...\",\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 21\n        }, this), errors.estimated_hours && touched.estimated_hours && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-red-600 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"w-4 h-4 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 29\n          }, this), errors.estimated_hours]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"assigned_to\",\n          className: \"block text-sm font-medium text-gray-700 mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(User, {\n            className: \"w-4 h-4 inline mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 25\n          }, this), \"Ng\\u01B0\\u1EDDi th\\u1EF1c hi\\u1EC7n\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"assigned_to\",\n          name: \"assigned_to\",\n          value: formData.assigned_to,\n          onChange: handleInputChange,\n          className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",\n          placeholder: `ID người thực hiện (mặc định: ${currentUser.id})`,\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-xs text-gray-500\",\n          children: [\"\\u0110\\u1EC3 tr\\u1ED1ng ho\\u1EB7c nh\\u1EADp ID ng\\u01B0\\u1EDDi d\\xF9ng. M\\u1EB7c \\u0111\\u1ECBnh l\\xE0 b\\u1EA1n (\", currentUser.id, \").\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"category_id\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Danh m\\u1EE5c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"category_id\",\n            name: \"category_id\",\n            value: formData.category_id,\n            onChange: handleInputChange,\n            className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",\n            placeholder: \"ID danh m\\u1EE5c (t\\xF9y ch\\u1ECDn)\",\n            disabled: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"department_id\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Ph\\xF2ng ban\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"department_id\",\n            name: \"department_id\",\n            value: formData.department_id,\n            onChange: handleInputChange,\n            className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",\n            placeholder: `ID phòng ban (mặc định: ${currentUser.department_id || 'không có'})`,\n            disabled: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleCancel,\n          disabled: isLoading,\n          className: \"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 font-medium\",\n          children: \"H\\u1EE7y b\\u1ECF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoading,\n          className: \"px-6 py-3 bg-gradient-to-r from-[#FBBF77] to-[#F59E0B] hover:from-[#F59E0B] hover:to-[#FBBF77] text-white rounded-lg font-semibold transition-all duration-200 shadow-sm disabled:opacity-50 hover:shadow-md flex items-center\",\n          children: isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 33\n            }, this), isEditing ? 'Đang cập nhật...' : 'Đang tạo...']\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 33\n            }, this), isEditing ? 'Cập nhật' : 'Tạo công việc']\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 9\n  }, this);\n}\n_s(TaskForm, \"sTkUIXKVqtXBx7S28GshX8R3YGI=\");\n_c = TaskForm;\nvar _c;\n$RefreshReg$(_c, \"TaskForm\");","map":{"version":3,"names":["React","useState","useEffect","X","Save","Calendar","Clock","Flag","User","FileText","AlertCircle","Plus","Edit3","jsxDEV","_jsxDEV","Fragment","_Fragment","TaskForm","task","currentUser","onSave","onCancel","isLoading","_s","formData","setFormData","title","description","status","priority","start_date","due_date","estimated_hours","assigned_to","category_id","department_id","errors","setErrors","touched","setTouched","isEditing","console","log","taskFormData","id","split","newTaskFormData","validateField","name","value","trim","length","isNaN","Date","validateDates","start","due","today","setHours","handleInputChange","e","target","prev","error","handleInputBlur","handleSubmit","preventDefault","newErrors","newTouched","Object","keys","forEach","key","dateErrors","assign","taskData","parseInt","Error","errorMessage","message","includes","submit","handleCancel","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","onSubmit","full_name","username","htmlFor","type","onChange","onBlur","placeholder","rows","min","max","_c","$RefreshReg$"],"sources":["D:/Stratix/frontend/src/components/Tasks/TaskForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n    X,\r\n    Save,\r\n    Calendar,\r\n    Clock,\r\n    Flag,\r\n    User,\r\n    FileText,\r\n    AlertCircle,\r\n    Plus,\r\n    Edit3\r\n} from 'lucide-react';\r\n\r\nexport default function TaskForm({\r\n    task,\r\n    currentUser,\r\n    onSave,\r\n    onCancel,\r\n    isLoading = false\r\n}) {\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        description: '',\r\n        status: 'todo',\r\n        priority: 'medium',\r\n        start_date: '',\r\n        due_date: '',\r\n        estimated_hours: '',\r\n        assigned_to: '',\r\n        category_id: '',\r\n        department_id: ''\r\n    });\r\n\r\n    const [errors, setErrors] = useState({});\r\n    const [touched, setTouched] = useState({});\r\n\r\n    const isEditing = !!task;\r\n\r\n    // Khởi tạo form data\r\n    useEffect(() => {\r\n        console.log('=== FORM INIT DEBUG ===');\r\n        console.log('Task prop:', task);\r\n        console.log('Current user prop:', currentUser);\r\n\r\n        if (task) {\r\n            // Editing existing task - convert từ PostgreSQL format\r\n            const taskFormData = {\r\n                id: task.id,\r\n                title: task.title || '',\r\n                description: task.description || '',\r\n                status: task.status || 'todo',\r\n                priority: task.priority || 'medium',\r\n                start_date: task.start_date ? task.start_date.split('T')[0] : '',\r\n                due_date: task.due_date ? task.due_date.split('T')[0] : '',\r\n                estimated_hours: task.estimated_hours || '',\r\n                assigned_to: task.assigned_to || currentUser?.id || '',\r\n                category_id: task.category_id || '',\r\n                department_id: task.department_id || currentUser?.department_id || ''\r\n            };\r\n\r\n            console.log('Setting form data for editing:', taskFormData);\r\n            setFormData(taskFormData);\r\n        } else {\r\n            // Creating new task\r\n            const newTaskFormData = {\r\n                title: '',\r\n                description: '',\r\n                status: 'todo',\r\n                priority: 'medium',\r\n                start_date: '',\r\n                due_date: '',\r\n                estimated_hours: '',\r\n                assigned_to: currentUser?.id || '',\r\n                category_id: '',\r\n                department_id: currentUser?.department_id || ''\r\n            };\r\n\r\n            console.log('Setting form data for new task:', newTaskFormData);\r\n            setFormData(newTaskFormData);\r\n        }\r\n    }, [task, currentUser]);\r\n\r\n    // Validation functions\r\n    const validateField = (name, value) => {\r\n        switch (name) {\r\n            case 'title':\r\n                if (!value?.trim()) return 'Tiêu đề là bắt buộc';\r\n                if (value.length < 3) return 'Tiêu đề phải có ít nhất 3 ký tự';\r\n                if (value.length > 200) return 'Tiêu đề không được vượt quá 200 ký tự';\r\n                return '';\r\n\r\n            case 'description':\r\n                if (value && value.length > 2000) return 'Mô tả không được vượt quá 2000 ký tự';\r\n                return '';\r\n\r\n            case 'estimated_hours':\r\n                if (value && (isNaN(value) || value < 1 || value > 1000)) {\r\n                    return 'Số giờ ước tính phải từ 1-1000';\r\n                }\r\n                return '';\r\n\r\n            case 'start_date':\r\n            case 'due_date':\r\n                if (value && isNaN(new Date(value))) {\r\n                    return 'Ngày không hợp lệ';\r\n                }\r\n                return '';\r\n\r\n            default:\r\n                return '';\r\n        }\r\n    };\r\n\r\n    const validateDates = () => {\r\n        const errors = {};\r\n        const { start_date, due_date } = formData;\r\n\r\n        if (start_date && due_date) {\r\n            const start = new Date(start_date);\r\n            const due = new Date(due_date);\r\n\r\n            if (start > due) {\r\n                errors.start_date = 'Ngày bắt đầu không thể sau ngày kết thúc';\r\n                errors.due_date = 'Ngày kết thúc không thể trước ngày bắt đầu';\r\n            }\r\n        }\r\n\r\n        if (due_date && !isEditing) {\r\n            const due = new Date(due_date);\r\n            const today = new Date();\r\n            today.setHours(0, 0, 0, 0);\r\n\r\n            if (due < today) {\r\n                errors.due_date = 'Ngày hết hạn không thể là ngày trong quá khứ';\r\n            }\r\n        }\r\n\r\n        return errors;\r\n    };\r\n\r\n    // Handle input changes\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n\r\n        // Clear errors when user starts typing\r\n        if (errors[name]) {\r\n            setErrors(prev => ({ ...prev, [name]: '' }));\r\n        }\r\n\r\n        // Validate field if it's been touched\r\n        if (touched[name]) {\r\n            const error = validateField(name, value);\r\n            setErrors(prev => ({ ...prev, [name]: error }));\r\n        }\r\n    };\r\n\r\n    const handleInputBlur = (e) => {\r\n        const { name, value } = e.target;\r\n        setTouched(prev => ({ ...prev, [name]: true }));\r\n\r\n        const error = validateField(name, value);\r\n        setErrors(prev => ({ ...prev, [name]: error }));\r\n    };\r\n\r\n    // Handle form submission\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        console.log('=== FORM SUBMIT DEBUG ===');\r\n        console.log('Raw form data:', formData);\r\n        console.log('Current user:', currentUser);\r\n\r\n        // Validate all fields\r\n        const newErrors = {};\r\n        const newTouched = {};\r\n\r\n        // Required fields validation\r\n        Object.keys(formData).forEach(key => {\r\n            newTouched[key] = true;\r\n            const error = validateField(key, formData[key]);\r\n            if (error) newErrors[key] = error;\r\n        });\r\n\r\n        // Date validation\r\n        const dateErrors = validateDates();\r\n        Object.assign(newErrors, dateErrors);\r\n\r\n        setTouched(newTouched);\r\n        setErrors(newErrors);\r\n\r\n        // Stop if there are errors\r\n        if (Object.keys(newErrors).length > 0) {\r\n            console.log('Form validation errors:', newErrors);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Prepare data for API - PostgreSQL format\r\n            const taskData = {\r\n                // Include ID if editing\r\n                ...(isEditing && { id: formData.id }),\r\n\r\n                // Basic fields\r\n                title: formData.title.trim(),\r\n                description: formData.description.trim(),\r\n                status: formData.status,\r\n                priority: formData.priority,\r\n\r\n                // Dates - null if empty\r\n                start_date: formData.start_date || null,\r\n                due_date: formData.due_date || null,\r\n\r\n                // Numbers - null if empty, convert to int if not\r\n                estimated_hours: formData.estimated_hours ? parseInt(formData.estimated_hours, 10) : null,\r\n\r\n                // User assignment - ensure we have a valid user ID\r\n                assigned_to: formData.assigned_to ? parseInt(formData.assigned_to, 10) : (currentUser?.id || null),\r\n\r\n                // Categories - null if empty, convert to int if not\r\n                category_id: formData.category_id ? parseInt(formData.category_id, 10) : null,\r\n                department_id: formData.department_id ? parseInt(formData.department_id, 10) : (currentUser?.department_id || null)\r\n            };\r\n\r\n            console.log('Processed task data for API:', taskData);\r\n\r\n            // Validate required user context\r\n            if (!currentUser || !currentUser.id) {\r\n                throw new Error('Thông tin người dùng không hợp lệ. Vui lòng đăng nhập lại.');\r\n            }\r\n\r\n            await onSave(taskData);\r\n        } catch (error) {\r\n            console.error('Form submission error:', error);\r\n\r\n            // Hiển thị lỗi chi tiết hơn\r\n            let errorMessage = 'Có lỗi xảy ra khi lưu công việc';\r\n\r\n            if (error.message.includes('Failed to create task')) {\r\n                errorMessage = 'Không thể tạo công việc. Vui lòng kiểm tra kết nối mạng và thử lại.';\r\n            } else if (error.message.includes('Failed to update task')) {\r\n                errorMessage = 'Không thể cập nhật công việc. Vui lòng thử lại.';\r\n            } else if (error.message.includes('fetch')) {\r\n                errorMessage = 'Không thể kết nối đến server. Vui lòng kiểm tra server có đang chạy không.';\r\n            } else if (error.message.includes('người dùng')) {\r\n                errorMessage = error.message;\r\n            }\r\n\r\n            setErrors({ submit: errorMessage });\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        onCancel();\r\n    };\r\n\r\n    // Đảm bảo có user context\r\n    if (!currentUser) {\r\n        return (\r\n            <div className=\"p-6 text-center\">\r\n                <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Không có thông tin người dùng</h3>\r\n                <p className=\"text-gray-600 mb-4\">Vui lòng đăng nhập để sử dụng tính năng này.</p>\r\n                <button\r\n                    onClick={handleCancel}\r\n                    className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n                >\r\n                    Đóng\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n                        {isEditing ? (\r\n                            <Edit3 className=\"w-5 h-5 text-blue-600\" />\r\n                        ) : (\r\n                            <Plus className=\"w-5 h-5 text-blue-600\" />\r\n                        )}\r\n                    </div>\r\n                    <div>\r\n                        <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                            {isEditing ? 'Chỉnh sửa công việc' : 'Tạo công việc mới'}\r\n                        </h2>\r\n                        <p className=\"text-sm text-gray-600\">\r\n                            {isEditing ? 'Cập nhật thông tin công việc' : 'Điền thông tin để tạo công việc mới'}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={handleCancel}\r\n                    disabled={isLoading}\r\n                    className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\r\n                    title=\"Đóng\"\r\n                >\r\n                    <X className=\"w-5 h-5\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Form */}\r\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n                {/* Submit Error */}\r\n                {errors.submit && (\r\n                    <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3\">\r\n                        <AlertCircle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\r\n                        <div>\r\n                            <h4 className=\"font-medium text-red-900\">Có lỗi xảy ra</h4>\r\n                            <p className=\"text-sm text-red-700 mt-1\">{errors.submit}</p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* User Info Display */}\r\n                <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                    <div className=\"flex items-center space-x-2 text-sm text-blue-800\">\r\n                        <User className=\"w-4 h-4\" />\r\n                        <span>\r\n                            Người tạo: {currentUser.full_name || currentUser.username} (ID: {currentUser.id})\r\n                            {currentUser.department_id && ` | Phòng ban: ${currentUser.department_id}`}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Title */}\r\n                <div>\r\n                    <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        <FileText className=\"w-4 h-4 inline mr-1\" />\r\n                        Tiêu đề công việc *\r\n                    </label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"title\"\r\n                        name=\"title\"\r\n                        value={formData.title}\r\n                        onChange={handleInputChange}\r\n                        onBlur={handleInputBlur}\r\n                        className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${errors.title && touched.title\r\n                            ? 'border-red-300 focus:ring-red-500 focus:border-red-500'\r\n                            : 'border-gray-300'\r\n                            }`}\r\n                        placeholder=\"Nhập tiêu đề công việc...\"\r\n                        disabled={isLoading}\r\n                    />\r\n                    {errors.title && touched.title && (\r\n                        <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                            <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.title}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Description */}\r\n                <div>\r\n                    <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        Mô tả công việc\r\n                    </label>\r\n                    <textarea\r\n                        id=\"description\"\r\n                        name=\"description\"\r\n                        rows={4}\r\n                        value={formData.description}\r\n                        onChange={handleInputChange}\r\n                        onBlur={handleInputBlur}\r\n                        className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none ${errors.description && touched.description\r\n                            ? 'border-red-300 focus:ring-red-500 focus:border-red-500'\r\n                            : 'border-gray-300'\r\n                            }`}\r\n                        placeholder=\"Mô tả chi tiết về công việc...\"\r\n                        disabled={isLoading}\r\n                    />\r\n                    {errors.description && touched.description && (\r\n                        <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                            <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.description}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Status and Priority */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                        <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Trạng thái\r\n                        </label>\r\n                        <select\r\n                            id=\"status\"\r\n                            name=\"status\"\r\n                            value={formData.status}\r\n                            onChange={handleInputChange}\r\n                            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            <option value=\"todo\">Chờ làm</option>\r\n                            <option value=\"in_progress\">Đang làm</option>\r\n                            <option value=\"review\">Đang duyệt</option>\r\n                            <option value=\"completed\">Hoàn thành</option>\r\n                            <option value=\"cancelled\">Đã hủy</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label htmlFor=\"priority\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            <Flag className=\"w-4 h-4 inline mr-1\" />\r\n                            Độ ưu tiên\r\n                        </label>\r\n                        <select\r\n                            id=\"priority\"\r\n                            name=\"priority\"\r\n                            value={formData.priority}\r\n                            onChange={handleInputChange}\r\n                            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            <option value=\"low\">Thấp</option>\r\n                            <option value=\"medium\">Trung bình</option>\r\n                            <option value=\"high\">Cao</option>\r\n                            <option value=\"urgent\">Khẩn cấp</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Dates */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                        <label htmlFor=\"start_date\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            <Calendar className=\"w-4 h-4 inline mr-1\" />\r\n                            Ngày bắt đầu\r\n                        </label>\r\n                        <input\r\n                            type=\"date\"\r\n                            id=\"start_date\"\r\n                            name=\"start_date\"\r\n                            value={formData.start_date}\r\n                            onChange={handleInputChange}\r\n                            onBlur={handleInputBlur}\r\n                            className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${errors.start_date && touched.start_date\r\n                                ? 'border-red-300 focus:ring-red-500 focus:border-red-500'\r\n                                : 'border-gray-300'\r\n                                }`}\r\n                            disabled={isLoading}\r\n                        />\r\n                        {errors.start_date && touched.start_date && (\r\n                            <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                {errors.start_date}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label htmlFor=\"due_date\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            <Calendar className=\"w-4 h-4 inline mr-1\" />\r\n                            Ngày hết hạn\r\n                        </label>\r\n                        <input\r\n                            type=\"date\"\r\n                            id=\"due_date\"\r\n                            name=\"due_date\"\r\n                            value={formData.due_date}\r\n                            onChange={handleInputChange}\r\n                            onBlur={handleInputBlur}\r\n                            className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${errors.due_date && touched.due_date\r\n                                ? 'border-red-300 focus:ring-red-500 focus:border-red-500'\r\n                                : 'border-gray-300'\r\n                                }`}\r\n                            disabled={isLoading}\r\n                        />\r\n                        {errors.due_date && touched.due_date && (\r\n                            <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                {errors.due_date}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Estimated Hours */}\r\n                <div>\r\n                    <label htmlFor=\"estimated_hours\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        <Clock className=\"w-4 h-4 inline mr-1\" />\r\n                        Số giờ ước tính\r\n                    </label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"estimated_hours\"\r\n                        name=\"estimated_hours\"\r\n                        min=\"1\"\r\n                        max=\"1000\"\r\n                        value={formData.estimated_hours}\r\n                        onChange={handleInputChange}\r\n                        onBlur={handleInputBlur}\r\n                        className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${errors.estimated_hours && touched.estimated_hours\r\n                            ? 'border-red-300 focus:ring-red-500 focus:border-red-500'\r\n                            : 'border-gray-300'\r\n                            }`}\r\n                        placeholder=\"Nhập số giờ ước tính...\"\r\n                        disabled={isLoading}\r\n                    />\r\n                    {errors.estimated_hours && touched.estimated_hours && (\r\n                        <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                            <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.estimated_hours}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Assigned To */}\r\n                <div>\r\n                    <label htmlFor=\"assigned_to\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        <User className=\"w-4 h-4 inline mr-1\" />\r\n                        Người thực hiện\r\n                    </label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"assigned_to\"\r\n                        name=\"assigned_to\"\r\n                        value={formData.assigned_to}\r\n                        onChange={handleInputChange}\r\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                        placeholder={`ID người thực hiện (mặc định: ${currentUser.id})`}\r\n                        disabled={isLoading}\r\n                    />\r\n                    <p className=\"mt-1 text-xs text-gray-500\">\r\n                        Để trống hoặc nhập ID người dùng. Mặc định là bạn ({currentUser.id}).\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Categories */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                        <label htmlFor=\"category_id\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Danh mục\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            id=\"category_id\"\r\n                            name=\"category_id\"\r\n                            value={formData.category_id}\r\n                            onChange={handleInputChange}\r\n                            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                            placeholder=\"ID danh mục (tùy chọn)\"\r\n                            disabled={isLoading}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label htmlFor=\"department_id\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Phòng ban\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            id=\"department_id\"\r\n                            name=\"department_id\"\r\n                            value={formData.department_id}\r\n                            onChange={handleInputChange}\r\n                            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                            placeholder={`ID phòng ban (mặc định: ${currentUser.department_id || 'không có'})`}\r\n                            disabled={isLoading}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Action Buttons */}\r\n                <div className=\"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={handleCancel}\r\n                        disabled={isLoading}\r\n                        className=\"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 font-medium\"\r\n                    >\r\n                        Hủy bỏ\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={isLoading}\r\n                        className=\"px-6 py-3 bg-gradient-to-r from-[#FBBF77] to-[#F59E0B] hover:from-[#F59E0B] hover:to-[#FBBF77] text-white rounded-lg font-semibold transition-all duration-200 shadow-sm disabled:opacity-50 hover:shadow-md flex items-center\"\r\n                    >\r\n                        {isLoading ? (\r\n                            <>\r\n                                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\"></div>\r\n                                {isEditing ? 'Đang cập nhật...' : 'Đang tạo...'}\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <Save className=\"w-4 h-4 mr-2\" />\r\n                                {isEditing ? 'Cập nhật' : 'Tạo công việc'}\r\n                            </>\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}