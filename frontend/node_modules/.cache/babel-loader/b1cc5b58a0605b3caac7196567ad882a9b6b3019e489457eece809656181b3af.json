{"ast":null,"code":"var _jsxFileName = \"D:\\\\Stratix\\\\frontend\\\\src\\\\components\\\\Tasks\\\\MultiStepTaskForm.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { X, Save, Calendar, Clock, Flag, User, FileText, AlertCircle, Plus, Edit3, ChevronLeft, ChevronRight, CheckCircle } from 'lucide-react';\n\n// Constants đồng bộ với backend\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FORM_STEPS = {\n  BASIC_INFO: 1,\n  DETAILS: 2,\n  REVIEW: 3\n};\nconst FORM_STEPS_CONFIG = {\n  [FORM_STEPS.BASIC_INFO]: {\n    title: 'Thông tin cơ bản',\n    description: 'Nhập tiêu đề và mô tả công việc'\n  },\n  [FORM_STEPS.DETAILS]: {\n    title: 'Chi tiết',\n    description: 'Thiết lập trạng thái, ưu tiên và thời hạn'\n  },\n  [FORM_STEPS.REVIEW]: {\n    title: 'Xem lại',\n    description: 'Kiểm tra thông tin trước khi lưu'\n  }\n};\nconst TASK_STATUS = {\n  TODO: 'todo',\n  IN_PROGRESS: 'in_progress',\n  REVIEW: 'review',\n  COMPLETED: 'completed',\n  CANCELLED: 'cancelled'\n};\nconst TASK_PRIORITY = {\n  LOW: 'low',\n  MEDIUM: 'medium',\n  HIGH: 'high',\n  URGENT: 'urgent'\n};\nconst STORAGE_KEYS = {\n  DRAFT_TASK: 'taskmaster_draft_task'\n};\n\n/** ===========================\r\n *  Rich Text Editor đơn giản (mobile friendly)\r\n *  =========================== */\nconst RichTextEditor = ({\n  value,\n  onChange,\n  placeholder = 'Nhập nội dung...',\n  disabled\n}) => {\n  _s();\n  const [isPreview, setIsPreview] = useState(false);\n  const contentRef = useRef(null);\n  const handleFormat = cmd => {\n    if (disabled) return;\n    document.execCommand(cmd, false, null);\n    // đồng bộ state\n    if (contentRef.current) onChange(contentRef.current.innerHTML);\n  };\n  const handleInput = () => {\n    if (contentRef.current) onChange(contentRef.current.innerHTML);\n  };\n  useEffect(() => {\n    if (contentRef.current && value !== contentRef.current.innerHTML) {\n      contentRef.current.innerHTML = value || '';\n    }\n  }, [value]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border border-gray-200 rounded-xl overflow-hidden bg-white shadow-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap items-center gap-2 p-2 bg-gray-50 border-b border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleFormat('bold'),\n        disabled: disabled,\n        className: \"px-3 h-9 text-sm font-semibold rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition disabled:opacity-50\",\n        title: \"In \\u0111\\u1EADm\",\n        children: \"B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleFormat('italic'),\n        disabled: disabled,\n        className: \"px-3 h-9 text-sm italic rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition disabled:opacity-50\",\n        title: \"Nghi\\xEAng\",\n        children: \"I\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleFormat('underline'),\n        disabled: disabled,\n        className: \"px-3 h-9 text-sm underline rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition disabled:opacity-50\",\n        title: \"G\\u1EA1ch ch\\xE2n\",\n        children: \"U\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"w-px h-6 bg-gray-200\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => handleFormat('insertUnorderedList'),\n        disabled: disabled,\n        className: \"px-3 h-9 text-sm rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition disabled:opacity-50\",\n        title: \"Danh s\\xE1ch \\u0111\\u1EA7u d\\xF2ng\",\n        children: \"\\u2022 Danh s\\xE1ch\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setIsPreview(p => !p),\n          className: \"px-3 h-9 text-sm rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition\",\n          title: \"Xem tr\\u01B0\\u1EDBc\",\n          disabled: disabled,\n          children: isPreview ? 'Chỉnh sửa' : 'Xem trước'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-[96px] sm:min-h-[120px]\",\n      children: isPreview ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 sm:p-4 bg-gray-50 text-sm sm:text-base prose max-w-none\",\n        dangerouslySetInnerHTML: {\n          __html: value || '<p class=\"text-gray-400\">Không có nội dung</p>'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: contentRef,\n        contentEditable: !disabled,\n        onInput: handleInput,\n        className: \"p-3 sm:p-4 outline-none text-sm sm:text-base min-h-[88px] sm:min-h-[112px]\",\n        suppressContentEditableWarning: true,\n        \"data-placeholder\": placeholder,\n        style: {\n          minHeight: '88px',\n          WebkitUserSelect: disabled ? 'none' : 'text',\n          userSelect: disabled ? 'none' : 'text'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n                [contenteditable='true'][data-placeholder]:empty:before {\n                    content: attr(data-placeholder);\n                    color: #9ca3af;\n                }\n                [contenteditable='false'] {\n                    background-color: #f9fafb;\n                    cursor: not-allowed;\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n\n/** ===========================\r\n *  Điều hướng bước (Step Navigation)\r\n *  =========================== */\n_s(RichTextEditor, \"GAFXeIYOQPSeTkXPYU58OLLScYc=\");\n_c = RichTextEditor;\nconst StepNavigation = ({\n  currentStep,\n  steps,\n  onStepChange,\n  disabled = false\n}) => {\n  var _FORM_STEPS_CONFIG$cu, _FORM_STEPS_CONFIG$cu2;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-6 sm:mb-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center gap-3 sm:gap-5 overflow-x-auto pb-2\",\n      children: steps.map((stepKey, index) => {\n        var _FORM_STEPS_CONFIG$st;\n        const stepNumber = index + 1;\n        const isActive = currentStep === stepNumber;\n        const isDone = currentStep > stepNumber;\n        const isAccessible = stepNumber <= currentStep || !disabled;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center flex-shrink-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => isAccessible && onStepChange(stepNumber),\n            disabled: !isAccessible || disabled,\n            className: ['w-9 h-9 sm:w-10 sm:h-10 rounded-full text-xs sm:text-sm font-semibold flex items-center justify-center shadow-sm transition-all', isActive ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white' : isDone ? 'bg-emerald-600 text-white' : isAccessible ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-gray-100 text-gray-400 cursor-not-allowed'].join(' '),\n            title: ((_FORM_STEPS_CONFIG$st = FORM_STEPS_CONFIG[stepNumber]) === null || _FORM_STEPS_CONFIG$st === void 0 ? void 0 : _FORM_STEPS_CONFIG$st.title) || `Bước ${stepNumber}`,\n            children: isDone ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 43\n            }, this) : stepNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 29\n          }, this), index < steps.length - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: ['mx-2 sm:mx-3 h-1 rounded-full transition-all duration-200', isDone ? 'bg-emerald-500 w-10 sm:w-14' : 'bg-gray-200 w-8 sm:w-12'].join(' ')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 33\n          }, this)]\n        }, stepKey, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center px-3 mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-base sm:text-lg font-semibold text-gray-900\",\n        children: (_FORM_STEPS_CONFIG$cu = FORM_STEPS_CONFIG[currentStep]) === null || _FORM_STEPS_CONFIG$cu === void 0 ? void 0 : _FORM_STEPS_CONFIG$cu.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs sm:text-sm text-gray-600 mt-1\",\n        children: (_FORM_STEPS_CONFIG$cu2 = FORM_STEPS_CONFIG[currentStep]) === null || _FORM_STEPS_CONFIG$cu2 === void 0 ? void 0 : _FORM_STEPS_CONFIG$cu2.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 9\n  }, this);\n};\n\n/** ===========================\r\n *  Form nhiều bước tạo/chỉnh sửa Task\r\n *  =========================== */\n_c2 = StepNavigation;\nexport default function MultiStepTaskForm({\n  task = null,\n  currentUser,\n  onSave,\n  onCancel,\n  isLoading = false\n}) {\n  _s2();\n  const [currentStep, setCurrentStep] = useState(FORM_STEPS.BASIC_INFO);\n  const [formData, setFormData] = useState({\n    title: (task === null || task === void 0 ? void 0 : task.title) || '',\n    description: (task === null || task === void 0 ? void 0 : task.description) || '',\n    status: (task === null || task === void 0 ? void 0 : task.status) || TASK_STATUS.TODO,\n    priority: (task === null || task === void 0 ? void 0 : task.priority) || TASK_PRIORITY.MEDIUM,\n    start_date: task !== null && task !== void 0 && task.start_date ? task.start_date.split('T')[0] : '',\n    due_date: task !== null && task !== void 0 && task.due_date ? task.due_date.split('T')[0] : '',\n    estimated_hours: (task === null || task === void 0 ? void 0 : task.estimated_hours) || '',\n    assigned_to: (task === null || task === void 0 ? void 0 : task.assigned_to) || (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) || '',\n    category_id: (task === null || task === void 0 ? void 0 : task.category_id) || '',\n    department_id: (task === null || task === void 0 ? void 0 : task.department_id) || (currentUser === null || currentUser === void 0 ? void 0 : currentUser.department_id) || ''\n  });\n  const [errors, setErrors] = useState({});\n  const [submitError, setSubmitError] = useState('');\n  const [isDraft, setIsDraft] = useState(false);\n\n  // Refs\n  const titleRef = useRef(null);\n  const formRef = useRef(null);\n  const isEditing = !!task;\n\n  /** Lưu nháp tự động (localStorage) */\n  const saveDraft = useCallback(() => {\n    if (!task && (formData.title || formData.description)) {\n      try {\n        const draftData = {\n          ...formData,\n          timestamp: Date.now()\n        };\n        localStorage.setItem(STORAGE_KEYS.DRAFT_TASK, JSON.stringify(draftData));\n        setIsDraft(true);\n      } catch (err) {\n        console.error('Lỗi lưu nháp:', err);\n      }\n    }\n  }, [formData, task]);\n\n  // Load nháp khi mount\n  useEffect(() => {\n    if (!task) {\n      try {\n        const saved = localStorage.getItem(STORAGE_KEYS.DRAFT_TASK);\n        if (saved) {\n          const draft = JSON.parse(saved);\n          if (Date.now() - draft.timestamp < 24 * 60 * 60 * 1000) {\n            setFormData(prev => ({\n              ...prev,\n              ...draft\n            }));\n            setIsDraft(true);\n          }\n        }\n      } catch (err) {\n        console.error('Lỗi đọc nháp:', err);\n      }\n    }\n  }, [task]);\n\n  // Tự lưu nháp khi thay đổi dữ liệu\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (formData.title || formData.description) saveDraft();\n    }, 1000);\n    return () => clearTimeout(timer);\n  }, [formData, saveDraft]);\n\n  // Focus tiêu đề ở bước 1\n  useEffect(() => {\n    if (currentStep === FORM_STEPS.BASIC_INFO && titleRef.current) {\n      setTimeout(() => {\n        var _titleRef$current;\n        return (_titleRef$current = titleRef.current) === null || _titleRef$current === void 0 ? void 0 : _titleRef$current.focus();\n      }, 100);\n    }\n  }, [currentStep]);\n  const clearDraft = () => {\n    try {\n      localStorage.removeItem(STORAGE_KEYS.DRAFT_TASK);\n      setIsDraft(false);\n    } catch (err) {\n      console.error('Lỗi xóa nháp:', err);\n    }\n  };\n\n  /** Helpers */\n  const handleInputChange = (name, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (errors[name]) setErrors(prev => ({\n      ...prev,\n      [name]: ''\n    }));\n    if (submitError) setSubmitError('');\n  };\n  const getTodayDate = () => new Date().toISOString().split('T')[0];\n\n  /** Validate theo bước */\n  const validateStep = step => {\n    const newErrors = {};\n    if (step === FORM_STEPS.BASIC_INFO) {\n      if (!formData.title.trim()) newErrors.title = 'Tiêu đề là bắt buộc';else if (formData.title.length < 3) newErrors.title = 'Tiêu đề phải có ít nhất 3 ký tự';else if (formData.title.length > 200) newErrors.title = 'Tiêu đề không được vượt quá 200 ký tự';\n      const plainDesc = formData.description.replace(/<[^>]*>/g, '');\n      if (plainDesc && plainDesc.length > 2000) newErrors.description = 'Mô tả không được vượt quá 2000 ký tự';\n    }\n    if (step === FORM_STEPS.DETAILS) {\n      if (formData.start_date && formData.due_date) {\n        const start = new Date(formData.start_date);\n        const due = new Date(formData.due_date);\n        if (start > due) {\n          newErrors.start_date = 'Ngày bắt đầu không thể sau ngày kết thúc';\n          newErrors.due_date = 'Ngày kết thúc không thể trước ngày bắt đầu';\n        }\n      }\n      if (formData.due_date && !isEditing) {\n        const due = new Date(formData.due_date);\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        if (due < today) {\n          newErrors.due_date = 'Ngày hết hạn không thể là ngày trong quá khứ';\n        }\n      }\n      if (formData.estimated_hours && (isNaN(formData.estimated_hours) || formData.estimated_hours < 1 || formData.estimated_hours > 1000)) {\n        newErrors.estimated_hours = 'Số giờ ước tính phải từ 1-1000';\n      }\n      if (!Object.values(TASK_STATUS).includes(formData.status)) newErrors.status = 'Trạng thái không hợp lệ';\n      if (!Object.values(TASK_PRIORITY).includes(formData.priority)) newErrors.priority = 'Độ ưu tiên không hợp lệ';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  /** Điều hướng bước */\n  const goToStep = step => {\n    if (step < currentStep || validateStep(currentStep)) {\n      setCurrentStep(step);\n      requestAnimationFrame(() => {\n        var _formRef$current;\n        return (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start'\n        });\n      });\n    }\n  };\n  const nextStep = () => {\n    if (validateStep(currentStep) && currentStep < FORM_STEPS.REVIEW) {\n      setCurrentStep(currentStep + 1);\n      requestAnimationFrame(() => {\n        var _formRef$current2;\n        return (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start'\n        });\n      });\n    }\n  };\n  const prevStep = () => {\n    if (currentStep > FORM_STEPS.BASIC_INFO) setCurrentStep(currentStep - 1);\n  };\n\n  /** Submit */\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateStep(FORM_STEPS.BASIC_INFO) || !validateStep(FORM_STEPS.DETAILS)) {\n      setCurrentStep(FORM_STEPS.BASIC_INFO);\n      return;\n    }\n    try {\n      // Prepare data for API - PostgreSQL format\n      const taskData = {\n        // Include ID if editing\n        ...(isEditing && {\n          id: task.id\n        }),\n        // Basic fields\n        title: formData.title.trim(),\n        description: formData.description.trim(),\n        status: formData.status,\n        priority: formData.priority,\n        // Dates - null if empty\n        start_date: formData.start_date || null,\n        due_date: formData.due_date || null,\n        // Numbers - null if empty, convert to int if not\n        estimated_hours: formData.estimated_hours ? parseInt(formData.estimated_hours, 10) : null,\n        // User assignment - ensure we have a valid user ID\n        assigned_to: formData.assigned_to ? parseInt(formData.assigned_to, 10) : (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) || null,\n        // Categories - null if empty, convert to int if not\n        category_id: formData.category_id ? parseInt(formData.category_id, 10) : null,\n        department_id: formData.department_id ? parseInt(formData.department_id, 10) : (currentUser === null || currentUser === void 0 ? void 0 : currentUser.department_id) || null\n      };\n      await onSave(taskData);\n      clearDraft();\n    } catch (error) {\n      console.error('Form submission error:', error);\n      setSubmitError(error.message || 'Có lỗi xảy ra khi lưu task. Vui lòng thử lại.');\n    }\n  };\n\n  /** UI từng bước */\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case FORM_STEPS.BASIC_INFO:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-5 sm:space-y-6\",\n          children: [isDraft && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 border border-blue-200 rounded-xl p-3 sm:p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-500\",\n                children: \"\\uD83D\\uDCBE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-700\",\n                children: \"B\\u1EA3n nh\\xE1p \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c l\\u01B0u t\\u1EF1 \\u0111\\u1ED9ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: clearDraft,\n                className: \"ml-auto text-blue-600 hover:text-blue-800 underline\",\n                children: \"X\\xF3a b\\u1EA3n nh\\xE1p\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"title\",\n              className: \"block text-sm font-semibold text-gray-700 mb-1.5\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                className: \"w-4 h-4 inline mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 33\n              }, this), \"Ti\\xEAu \\u0111\\u1EC1 Task *\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: titleRef,\n              id: \"title\",\n              type: \"text\",\n              value: formData.title,\n              onChange: e => handleInputChange('title', e.target.value),\n              className: ['w-full px-4 py-3 rounded-xl border shadow-sm transition', errors.title ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent' : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent'].join(' '),\n              placeholder: \"Nh\\u1EADp ti\\xEAu \\u0111\\u1EC1 task...\",\n              maxLength: 200,\n              disabled: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 29\n            }, this), errors.title && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-red-600 mt-1 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"w-4 h-4 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 33\n              }, this), errors.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 46\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: [formData.title.length, \"/200 k\\xFD t\\u1EF1\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-1.5\",\n              children: \"M\\xF4 t\\u1EA3 chi ti\\u1EBFt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(RichTextEditor, {\n              value: formData.description,\n              onChange: v => handleInputChange('description', v),\n              placeholder: \"Nh\\u1EADp m\\xF4 t\\u1EA3 chi ti\\u1EBFt cho task (h\\u1ED7 tr\\u1EE3 Bold / Italic / Underline / List)...\",\n              disabled: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 29\n            }, this), errors.description && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-red-600 mt-1 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"w-4 h-4 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 33\n              }, this), errors.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 52\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: \"G\\u1EE3i \\xFD: Vi\\u1EBFt ng\\u1EAFn g\\u1ECDn, r\\xF5 r\\xE0ng v\\xE0 c\\xF3 checklist n\\u1EBFu c\\u1EA7n.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 21\n        }, this);\n      case FORM_STEPS.DETAILS:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-5 sm:space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 sm:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-1.5\",\n                children: \"Tr\\u1EA1ng th\\xE1i *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.status,\n                onChange: e => handleInputChange('status', e.target.value),\n                className: ['w-full px-4 py-3 rounded-xl border shadow-sm bg-white transition', errors.status ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent' : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent'].join(' '),\n                disabled: isLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_STATUS.TODO,\n                  children: \"\\u23F3 Ch\\u1EDD l\\xE0m\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_STATUS.IN_PROGRESS,\n                  children: \"\\uD83D\\uDD04 \\u0110ang l\\xE0m\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_STATUS.REVIEW,\n                  children: \"\\uD83D\\uDC41\\uFE0F \\u0110ang duy\\u1EC7t\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_STATUS.COMPLETED,\n                  children: \"\\u2705 Ho\\xE0n th\\xE0nh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_STATUS.CANCELLED,\n                  children: \"\\u274C \\u0110\\xE3 h\\u1EE7y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 531,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 33\n              }, this), errors.status && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-red-600 mt-1 flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 37\n                }, this), errors.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 51\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-1.5\",\n                children: [/*#__PURE__*/_jsxDEV(Flag, {\n                  className: \"w-4 h-4 inline mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 541,\n                  columnNumber: 37\n                }, this), \"\\u0110\\u1ED9 \\u01B0u ti\\xEAn *\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.priority,\n                onChange: e => handleInputChange('priority', e.target.value),\n                className: ['w-full px-4 py-3 rounded-xl border shadow-sm bg-white transition', errors.priority ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent' : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent'].join(' '),\n                disabled: isLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_PRIORITY.LOW,\n                  children: \"\\uD83D\\uDD35 Th\\u1EA5p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 555,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_PRIORITY.MEDIUM,\n                  children: \"\\uD83D\\uDFE1 Trung b\\xECnh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_PRIORITY.HIGH,\n                  children: \"\\uD83D\\uDD34 Cao\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: TASK_PRIORITY.URGENT,\n                  children: \"\\uD83D\\uDEA8 Kh\\u1EA9n c\\u1EA5p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 33\n              }, this), errors.priority && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-red-600 mt-1 flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 37\n                }, this), errors.priority]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 sm:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-1.5\",\n                children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                  className: \"w-4 h-4 inline mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 570,\n                  columnNumber: 37\n                }, this), \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: formData.start_date,\n                onChange: e => handleInputChange('start_date', e.target.value),\n                className: ['w-full px-4 py-3 rounded-xl border shadow-sm transition', errors.start_date ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent' : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent'].join(' '),\n                disabled: isLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 33\n              }, this), errors.start_date && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-red-600 mt-1 flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 586,\n                  columnNumber: 37\n                }, this), errors.start_date]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 55\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-1.5\",\n                children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                  className: \"w-4 h-4 inline mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 593,\n                  columnNumber: 37\n                }, this), \"Ng\\xE0y h\\u1EBFt h\\u1EA1n\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: formData.due_date,\n                onChange: e => handleInputChange('due_date', e.target.value),\n                min: getTodayDate(),\n                className: ['w-full px-4 py-3 rounded-xl border shadow-sm transition', errors.due_date ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent' : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent'].join(' '),\n                disabled: isLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 33\n              }, this), errors.due_date && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-red-600 mt-1 flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 37\n                }, this), errors.due_date]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-1.5\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"w-4 h-4 inline mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 33\n              }, this), \"S\\u1ED1 gi\\u1EDD \\u01B0\\u1EDBc t\\xEDnh\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: formData.estimated_hours,\n              onChange: e => handleInputChange('estimated_hours', e.target.value),\n              min: \"1\",\n              max: \"1000\",\n              className: ['w-full px-4 py-3 rounded-xl border shadow-sm transition', errors.estimated_hours ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent' : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent'].join(' '),\n              placeholder: \"Nh\\u1EADp s\\u1ED1 gi\\u1EDD \\u01B0\\u1EDBc t\\xEDnh...\",\n              disabled: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 29\n            }, this), errors.estimated_hours && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-red-600 mt-1 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"w-4 h-4 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 33\n              }, this), errors.estimated_hours]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 56\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 25\n          }, this), currentUser && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 bg-blue-50 border border-blue-200 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2 text-sm text-blue-800\",\n              children: [/*#__PURE__*/_jsxDEV(User, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Ng\\u01B0\\u1EDDi t\\u1EA1o: \", currentUser.full_name || currentUser.username, \" (ID: \", currentUser.id, \")\", currentUser.department_id && ` | Phòng ban: ${currentUser.department_id}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 21\n        }, this);\n      case FORM_STEPS.REVIEW:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-5 sm:space-y-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 shadow-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-base sm:text-lg font-semibold text-gray-900 mb-4\",\n              children: \"Xem l\\u1EA1i th\\xF4ng tin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium text-gray-600\",\n                  children: \"Ti\\xEAu \\u0111\\u1EC1:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-900 text-sm sm:text-base mt-1\",\n                  children: formData.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 33\n              }, this), formData.description && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium text-gray-600\",\n                  children: \"M\\xF4 t\\u1EA3:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 671,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-900 bg-gray-50 p-3 rounded-lg border text-sm sm:text-base mt-1 prose max-w-none\",\n                  dangerouslySetInnerHTML: {\n                    __html: formData.description\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 672,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-medium text-gray-600\",\n                    children: \"Tr\\u1EA1ng th\\xE1i:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 681,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-900 text-sm sm:text-base mt-1\",\n                    children: formData.status === TASK_STATUS.TODO ? '⏳ Chờ làm' : formData.status === TASK_STATUS.IN_PROGRESS ? '🔄 Đang làm' : formData.status === TASK_STATUS.REVIEW ? '👁️ Đang duyệt' : formData.status === TASK_STATUS.COMPLETED ? '✅ Hoàn thành' : '❌ Đã hủy'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 682,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 680,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-medium text-gray-600\",\n                    children: \"\\u0110\\u1ED9 \\u01B0u ti\\xEAn:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 696,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-900 text-sm sm:text-base mt-1\",\n                    children: formData.priority === TASK_PRIORITY.LOW ? '🔵 Thấp' : formData.priority === TASK_PRIORITY.MEDIUM ? '🟡 Trung bình' : formData.priority === TASK_PRIORITY.HIGH ? '🔴 Cao' : '🚨 Khẩn cấp'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 697,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 695,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-medium text-gray-600\",\n                    children: \"S\\u1ED1 gi\\u1EDD \\u01B0\\u1EDBc t\\xEDnh:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 709,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-900 text-sm sm:text-base mt-1\",\n                    children: formData.estimated_hours ? `${formData.estimated_hours} giờ` : 'Chưa đặt'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 710,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-medium text-gray-600\",\n                    children: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 718,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-900 text-sm sm:text-base mt-1\",\n                    children: formData.start_date ? `📅 ${new Date(formData.start_date).toLocaleDateString('vi-VN')}` : 'Chưa đặt'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 719,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 717,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-medium text-gray-600\",\n                    children: \"Ng\\xE0y h\\u1EBFt h\\u1EA1n:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 727,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-900 text-sm sm:text-base mt-1\",\n                    children: formData.due_date ? `📅 ${new Date(formData.due_date).toLocaleDateString('vi-VN')}` : 'Chưa đặt'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 728,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 726,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 716,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-blue-700 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                    className: \"w-4 h-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 738,\n                    columnNumber: 41\n                  }, this), \"\\u2713 Th\\xF4ng tin \\u0111\\xE3 s\\u1EB5n s\\xE0ng. Nh\\u1EA5n \\\"L\\u01B0u Task\\\" \\u0111\\u1EC3 ho\\xE0n t\\u1EA5t.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 737,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 736,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 21\n        }, this);\n      default:\n        return null;\n    }\n  };\n  const steps = Object.keys(FORM_STEPS_CONFIG);\n\n  // Đảm bảo có user context\n  if (!currentUser) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"w-12 h-12 text-red-500 mx-auto mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 758,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-2\",\n        children: \"Kh\\xF4ng c\\xF3 th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-4\",\n        children: \"Vui l\\xF2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 s\\u1EED d\\u1EE5ng t\\xEDnh n\\u0103ng n\\xE0y.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onCancel,\n        className: \"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\",\n        children: \"\\u0110\\xF3ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 761,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 sm:p-6 max-w-4xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-6 sm:mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2 bg-blue-100 rounded-lg\",\n          children: isEditing ? /*#__PURE__*/_jsxDEV(Edit3, {\n            className: \"w-5 h-5 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 778,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-5 h-5 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 780,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 776,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl sm:text-2xl font-bold text-gray-900\",\n            children: isEditing ? 'Chỉnh sửa Task' : 'Tạo Task Mới'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 text-sm sm:text-base\",\n            children: \"\\u0110i\\u1EC1n theo t\\u1EEBng b\\u01B0\\u1EDBc \\u0111\\u1EC3 ho\\xE0n t\\u1EA5t task c\\u1EE7a b\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 787,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 775,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onCancel,\n        disabled: isLoading,\n        className: \"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\",\n        title: \"\\u0110\\xF3ng\",\n        children: /*#__PURE__*/_jsxDEV(X, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 796,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 790,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 774,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: formRef,\n      onSubmit: handleSubmit,\n      className: \"bg-white border border-gray-200 rounded-2xl shadow-sm p-4 sm:p-6\",\n      children: [/*#__PURE__*/_jsxDEV(StepNavigation, {\n        currentStep: currentStep,\n        steps: steps,\n        onStepChange: goToStep,\n        disabled: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 802,\n        columnNumber: 17\n      }, this), submitError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 sm:mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 813,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-red-900\",\n              children: \"C\\xF3 l\\u1ED7i x\\u1EA3y ra\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 815,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-red-700 mt-1\",\n              children: submitError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 816,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 814,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSubmitError(''),\n            className: \"text-red-400 hover:text-red-600\",\n            title: \"\\u0110\\xF3ng\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 823,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 818,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 812,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 811,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 sm:mb-8\",\n        children: renderStepContent()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 830,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 pt-4 sm:pt-6 border-t border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3 order-2 sm:order-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onCancel,\n            disabled: isLoading,\n            className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition disabled:opacity-50\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 25\n          }, this), currentStep > FORM_STEPS.BASIC_INFO && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: prevStep,\n            disabled: isLoading,\n            className: \"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-xl hover:bg-blue-200 transition disabled:opacity-50 inline-flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n              className: \"w-4 h-4 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 851,\n              columnNumber: 33\n            }, this), \"Quay l\\u1EA1i\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 845,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"order-1 sm:order-2\",\n          children: currentStep < FORM_STEPS.REVIEW ? /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: nextStep,\n            disabled: isLoading,\n            className: \"px-5 py-2 text-sm font-medium text-white rounded-xl shadow-sm bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transition disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center\",\n            children: [\"Ti\\u1EBFp theo\", /*#__PURE__*/_jsxDEV(ChevronRight, {\n              className: \"w-4 h-4 ml-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 866,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 859,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: isLoading,\n            className: \"px-6 py-2 text-sm font-medium text-white rounded-xl shadow-sm bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2\",\n            children: isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 876,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0110ang l\\u01B0u...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 877,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 881,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: isEditing ? 'Cập nhật Task' : 'Lưu Task'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 869,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 857,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 833,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between text-xs text-gray-500 mb-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Ti\\u1EBFn \\u0111\\u1ED9 ho\\xE0n th\\xE0nh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 893,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [Math.round(currentStep / FORM_STEPS.REVIEW * 100), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 894,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 892,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-gray-200 rounded-full h-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gradient-to-r from-blue-500 to-emerald-500 h-2 rounded-full transition-all duration-300\",\n            style: {\n              width: `${currentStep / FORM_STEPS.REVIEW * 100}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 897,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 896,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 891,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 800,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 772,\n    columnNumber: 9\n  }, this);\n}\n_s2(MultiStepTaskForm, \"vGi3m+x2Zt4Y2k24I0MntxLZTIE=\");\n_c3 = MultiStepTaskForm;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"RichTextEditor\");\n$RefreshReg$(_c2, \"StepNavigation\");\n$RefreshReg$(_c3, \"MultiStepTaskForm\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","X","Save","Calendar","Clock","Flag","User","FileText","AlertCircle","Plus","Edit3","ChevronLeft","ChevronRight","CheckCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","FORM_STEPS","BASIC_INFO","DETAILS","REVIEW","FORM_STEPS_CONFIG","title","description","TASK_STATUS","TODO","IN_PROGRESS","COMPLETED","CANCELLED","TASK_PRIORITY","LOW","MEDIUM","HIGH","URGENT","STORAGE_KEYS","DRAFT_TASK","RichTextEditor","value","onChange","placeholder","disabled","_s","isPreview","setIsPreview","contentRef","handleFormat","cmd","document","execCommand","current","innerHTML","handleInput","className","children","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","p","dangerouslySetInnerHTML","__html","ref","contentEditable","onInput","suppressContentEditableWarning","style","minHeight","WebkitUserSelect","userSelect","jsx","_c","StepNavigation","currentStep","steps","onStepChange","_FORM_STEPS_CONFIG$cu","_FORM_STEPS_CONFIG$cu2","map","stepKey","index","_FORM_STEPS_CONFIG$st","stepNumber","isActive","isDone","isAccessible","join","length","_c2","MultiStepTaskForm","task","currentUser","onSave","onCancel","isLoading","_s2","setCurrentStep","formData","setFormData","status","priority","start_date","split","due_date","estimated_hours","assigned_to","id","category_id","department_id","errors","setErrors","submitError","setSubmitError","isDraft","setIsDraft","titleRef","formRef","isEditing","saveDraft","draftData","timestamp","Date","now","localStorage","setItem","JSON","stringify","err","console","error","saved","getItem","draft","parse","prev","timer","setTimeout","clearTimeout","_titleRef$current","focus","clearDraft","removeItem","handleInputChange","name","getTodayDate","toISOString","validateStep","step","newErrors","trim","plainDesc","replace","start","due","today","setHours","isNaN","Object","values","includes","keys","goToStep","requestAnimationFrame","_formRef$current","scrollIntoView","behavior","block","nextStep","_formRef$current2","prevStep","handleSubmit","e","preventDefault","taskData","parseInt","message","renderStepContent","htmlFor","target","maxLength","v","min","max","full_name","username","toLocaleDateString","onSubmit","Math","round","width","_c3","$RefreshReg$"],"sources":["D:/Stratix/frontend/src/components/Tasks/MultiStepTaskForm.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport {\r\n    X,\r\n    Save,\r\n    Calendar,\r\n    Clock,\r\n    Flag,\r\n    User,\r\n    FileText,\r\n    AlertCircle,\r\n    Plus,\r\n    Edit3,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    CheckCircle\r\n} from 'lucide-react';\r\n\r\n// Constants đồng bộ với backend\r\nconst FORM_STEPS = {\r\n    BASIC_INFO: 1,\r\n    DETAILS: 2,\r\n    REVIEW: 3\r\n};\r\n\r\nconst FORM_STEPS_CONFIG = {\r\n    [FORM_STEPS.BASIC_INFO]: {\r\n        title: 'Thông tin cơ bản',\r\n        description: 'Nhập tiêu đề và mô tả công việc'\r\n    },\r\n    [FORM_STEPS.DETAILS]: {\r\n        title: 'Chi tiết',\r\n        description: 'Thiết lập trạng thái, ưu tiên và thời hạn'\r\n    },\r\n    [FORM_STEPS.REVIEW]: {\r\n        title: 'Xem lại',\r\n        description: 'Kiểm tra thông tin trước khi lưu'\r\n    }\r\n};\r\n\r\nconst TASK_STATUS = {\r\n    TODO: 'todo',\r\n    IN_PROGRESS: 'in_progress',\r\n    REVIEW: 'review',\r\n    COMPLETED: 'completed',\r\n    CANCELLED: 'cancelled'\r\n};\r\n\r\nconst TASK_PRIORITY = {\r\n    LOW: 'low',\r\n    MEDIUM: 'medium',\r\n    HIGH: 'high',\r\n    URGENT: 'urgent'\r\n};\r\n\r\nconst STORAGE_KEYS = {\r\n    DRAFT_TASK: 'taskmaster_draft_task'\r\n};\r\n\r\n/** ===========================\r\n *  Rich Text Editor đơn giản (mobile friendly)\r\n *  =========================== */\r\nconst RichTextEditor = ({ value, onChange, placeholder = 'Nhập nội dung...', disabled }) => {\r\n    const [isPreview, setIsPreview] = useState(false);\r\n    const contentRef = useRef(null);\r\n\r\n    const handleFormat = (cmd) => {\r\n        if (disabled) return;\r\n        document.execCommand(cmd, false, null);\r\n        // đồng bộ state\r\n        if (contentRef.current) onChange(contentRef.current.innerHTML);\r\n    };\r\n\r\n    const handleInput = () => {\r\n        if (contentRef.current) onChange(contentRef.current.innerHTML);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (contentRef.current && value !== contentRef.current.innerHTML) {\r\n            contentRef.current.innerHTML = value || '';\r\n        }\r\n    }, [value]);\r\n\r\n    return (\r\n        <div className=\"border border-gray-200 rounded-xl overflow-hidden bg-white shadow-sm\">\r\n            {/* Toolbar */}\r\n            <div className=\"flex flex-wrap items-center gap-2 p-2 bg-gray-50 border-b border-gray-200\">\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => handleFormat('bold')}\r\n                    disabled={disabled}\r\n                    className=\"px-3 h-9 text-sm font-semibold rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition disabled:opacity-50\"\r\n                    title=\"In đậm\"\r\n                >\r\n                    B\r\n                </button>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => handleFormat('italic')}\r\n                    disabled={disabled}\r\n                    className=\"px-3 h-9 text-sm italic rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition disabled:opacity-50\"\r\n                    title=\"Nghiêng\"\r\n                >\r\n                    I\r\n                </button>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => handleFormat('underline')}\r\n                    disabled={disabled}\r\n                    className=\"px-3 h-9 text-sm underline rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition disabled:opacity-50\"\r\n                    title=\"Gạch chân\"\r\n                >\r\n                    U\r\n                </button>\r\n\r\n                <span className=\"w-px h-6 bg-gray-200\" />\r\n\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => handleFormat('insertUnorderedList')}\r\n                    disabled={disabled}\r\n                    className=\"px-3 h-9 text-sm rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition disabled:opacity-50\"\r\n                    title=\"Danh sách đầu dòng\"\r\n                >\r\n                    • Danh sách\r\n                </button>\r\n\r\n                <div className=\"ml-auto\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => setIsPreview((p) => !p)}\r\n                        className=\"px-3 h-9 text-sm rounded-lg bg-white border border-gray-200 hover:bg-gray-100 transition\"\r\n                        title=\"Xem trước\"\r\n                        disabled={disabled}\r\n                    >\r\n                        {isPreview ? 'Chỉnh sửa' : 'Xem trước'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Vùng nội dung */}\r\n            <div className=\"min-h-[96px] sm:min-h-[120px]\">\r\n                {isPreview ? (\r\n                    <div\r\n                        className=\"p-3 sm:p-4 bg-gray-50 text-sm sm:text-base prose max-w-none\"\r\n                        dangerouslySetInnerHTML={{ __html: value || '<p class=\"text-gray-400\">Không có nội dung</p>' }}\r\n                    />\r\n                ) : (\r\n                    <div\r\n                        ref={contentRef}\r\n                        contentEditable={!disabled}\r\n                        onInput={handleInput}\r\n                        className=\"p-3 sm:p-4 outline-none text-sm sm:text-base min-h-[88px] sm:min-h-[112px]\"\r\n                        suppressContentEditableWarning\r\n                        data-placeholder={placeholder}\r\n                        style={{\r\n                            minHeight: '88px',\r\n                            WebkitUserSelect: disabled ? 'none' : 'text',\r\n                            userSelect: disabled ? 'none' : 'text'\r\n                        }}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            {/* Placeholder CSS */}\r\n            <style jsx>{`\r\n                [contenteditable='true'][data-placeholder]:empty:before {\r\n                    content: attr(data-placeholder);\r\n                    color: #9ca3af;\r\n                }\r\n                [contenteditable='false'] {\r\n                    background-color: #f9fafb;\r\n                    cursor: not-allowed;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\n/** ===========================\r\n *  Điều hướng bước (Step Navigation)\r\n *  =========================== */\r\nconst StepNavigation = ({ currentStep, steps, onStepChange, disabled = false }) => {\r\n    return (\r\n        <div className=\"mb-6 sm:mb-8\">\r\n            <div className=\"flex items-center justify-center gap-3 sm:gap-5 overflow-x-auto pb-2\">\r\n                {steps.map((stepKey, index) => {\r\n                    const stepNumber = index + 1;\r\n                    const isActive = currentStep === stepNumber;\r\n                    const isDone = currentStep > stepNumber;\r\n                    const isAccessible = stepNumber <= currentStep || !disabled;\r\n\r\n                    return (\r\n                        <div key={stepKey} className=\"flex items-center flex-shrink-0\">\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => isAccessible && onStepChange(stepNumber)}\r\n                                disabled={!isAccessible || disabled}\r\n                                className={[\r\n                                    'w-9 h-9 sm:w-10 sm:h-10 rounded-full text-xs sm:text-sm font-semibold flex items-center justify-center shadow-sm transition-all',\r\n                                    isActive\r\n                                        ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white'\r\n                                        : isDone\r\n                                            ? 'bg-emerald-600 text-white'\r\n                                            : isAccessible\r\n                                                ? 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                                                : 'bg-gray-100 text-gray-400 cursor-not-allowed',\r\n                                ].join(' ')}\r\n                                title={FORM_STEPS_CONFIG[stepNumber]?.title || `Bước ${stepNumber}`}\r\n                            >\r\n                                {isDone ? <CheckCircle className=\"w-4 h-4\" /> : stepNumber}\r\n                            </button>\r\n\r\n                            {index < steps.length - 1 && (\r\n                                <div\r\n                                    className={[\r\n                                        'mx-2 sm:mx-3 h-1 rounded-full transition-all duration-200',\r\n                                        isDone ? 'bg-emerald-500 w-10 sm:w-14' : 'bg-gray-200 w-8 sm:w-12',\r\n                                    ].join(' ')}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            <div className=\"text-center px-3 mt-3\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-gray-900\">\r\n                    {FORM_STEPS_CONFIG[currentStep]?.title}\r\n                </h3>\r\n                <p className=\"text-xs sm:text-sm text-gray-600 mt-1\">\r\n                    {FORM_STEPS_CONFIG[currentStep]?.description}\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n/** ===========================\r\n *  Form nhiều bước tạo/chỉnh sửa Task\r\n *  =========================== */\r\nexport default function MultiStepTaskForm({\r\n    task = null,\r\n    currentUser,\r\n    onSave,\r\n    onCancel,\r\n    isLoading = false\r\n}) {\r\n    const [currentStep, setCurrentStep] = useState(FORM_STEPS.BASIC_INFO);\r\n    const [formData, setFormData] = useState({\r\n        title: task?.title || '',\r\n        description: task?.description || '',\r\n        status: task?.status || TASK_STATUS.TODO,\r\n        priority: task?.priority || TASK_PRIORITY.MEDIUM,\r\n        start_date: task?.start_date ? task.start_date.split('T')[0] : '',\r\n        due_date: task?.due_date ? task.due_date.split('T')[0] : '',\r\n        estimated_hours: task?.estimated_hours || '',\r\n        assigned_to: task?.assigned_to || currentUser?.id || '',\r\n        category_id: task?.category_id || '',\r\n        department_id: task?.department_id || currentUser?.department_id || ''\r\n    });\r\n\r\n    const [errors, setErrors] = useState({});\r\n    const [submitError, setSubmitError] = useState('');\r\n    const [isDraft, setIsDraft] = useState(false);\r\n\r\n    // Refs\r\n    const titleRef = useRef(null);\r\n    const formRef = useRef(null);\r\n\r\n    const isEditing = !!task;\r\n\r\n    /** Lưu nháp tự động (localStorage) */\r\n    const saveDraft = useCallback(() => {\r\n        if (!task && (formData.title || formData.description)) {\r\n            try {\r\n                const draftData = { ...formData, timestamp: Date.now() };\r\n                localStorage.setItem(STORAGE_KEYS.DRAFT_TASK, JSON.stringify(draftData));\r\n                setIsDraft(true);\r\n            } catch (err) {\r\n                console.error('Lỗi lưu nháp:', err);\r\n            }\r\n        }\r\n    }, [formData, task]);\r\n\r\n    // Load nháp khi mount\r\n    useEffect(() => {\r\n        if (!task) {\r\n            try {\r\n                const saved = localStorage.getItem(STORAGE_KEYS.DRAFT_TASK);\r\n                if (saved) {\r\n                    const draft = JSON.parse(saved);\r\n                    if (Date.now() - draft.timestamp < 24 * 60 * 60 * 1000) {\r\n                        setFormData(prev => ({ ...prev, ...draft }));\r\n                        setIsDraft(true);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                console.error('Lỗi đọc nháp:', err);\r\n            }\r\n        }\r\n    }, [task]);\r\n\r\n    // Tự lưu nháp khi thay đổi dữ liệu\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            if (formData.title || formData.description) saveDraft();\r\n        }, 1000);\r\n        return () => clearTimeout(timer);\r\n    }, [formData, saveDraft]);\r\n\r\n    // Focus tiêu đề ở bước 1\r\n    useEffect(() => {\r\n        if (currentStep === FORM_STEPS.BASIC_INFO && titleRef.current) {\r\n            setTimeout(() => titleRef.current?.focus(), 100);\r\n        }\r\n    }, [currentStep]);\r\n\r\n    const clearDraft = () => {\r\n        try {\r\n            localStorage.removeItem(STORAGE_KEYS.DRAFT_TASK);\r\n            setIsDraft(false);\r\n        } catch (err) {\r\n            console.error('Lỗi xóa nháp:', err);\r\n        }\r\n    };\r\n\r\n    /** Helpers */\r\n    const handleInputChange = (name, value) => {\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n        if (errors[name]) setErrors((prev) => ({ ...prev, [name]: '' }));\r\n        if (submitError) setSubmitError('');\r\n    };\r\n\r\n    const getTodayDate = () => new Date().toISOString().split('T')[0];\r\n\r\n    /** Validate theo bước */\r\n    const validateStep = (step) => {\r\n        const newErrors = {};\r\n\r\n        if (step === FORM_STEPS.BASIC_INFO) {\r\n            if (!formData.title.trim()) newErrors.title = 'Tiêu đề là bắt buộc';\r\n            else if (formData.title.length < 3) newErrors.title = 'Tiêu đề phải có ít nhất 3 ký tự';\r\n            else if (formData.title.length > 200) newErrors.title = 'Tiêu đề không được vượt quá 200 ký tự';\r\n\r\n            const plainDesc = formData.description.replace(/<[^>]*>/g, '');\r\n            if (plainDesc && plainDesc.length > 2000) newErrors.description = 'Mô tả không được vượt quá 2000 ký tự';\r\n        }\r\n\r\n        if (step === FORM_STEPS.DETAILS) {\r\n            if (formData.start_date && formData.due_date) {\r\n                const start = new Date(formData.start_date);\r\n                const due = new Date(formData.due_date);\r\n                if (start > due) {\r\n                    newErrors.start_date = 'Ngày bắt đầu không thể sau ngày kết thúc';\r\n                    newErrors.due_date = 'Ngày kết thúc không thể trước ngày bắt đầu';\r\n                }\r\n            }\r\n\r\n            if (formData.due_date && !isEditing) {\r\n                const due = new Date(formData.due_date);\r\n                const today = new Date();\r\n                today.setHours(0, 0, 0, 0);\r\n                if (due < today) {\r\n                    newErrors.due_date = 'Ngày hết hạn không thể là ngày trong quá khứ';\r\n                }\r\n            }\r\n\r\n            if (formData.estimated_hours && (isNaN(formData.estimated_hours) || formData.estimated_hours < 1 || formData.estimated_hours > 1000)) {\r\n                newErrors.estimated_hours = 'Số giờ ước tính phải từ 1-1000';\r\n            }\r\n\r\n            if (!Object.values(TASK_STATUS).includes(formData.status)) newErrors.status = 'Trạng thái không hợp lệ';\r\n            if (!Object.values(TASK_PRIORITY).includes(formData.priority)) newErrors.priority = 'Độ ưu tiên không hợp lệ';\r\n        }\r\n\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    /** Điều hướng bước */\r\n    const goToStep = (step) => {\r\n        if (step < currentStep || validateStep(currentStep)) {\r\n            setCurrentStep(step);\r\n            requestAnimationFrame(() => formRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' }));\r\n        }\r\n    };\r\n\r\n    const nextStep = () => {\r\n        if (validateStep(currentStep) && currentStep < FORM_STEPS.REVIEW) {\r\n            setCurrentStep(currentStep + 1);\r\n            requestAnimationFrame(() => formRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' }));\r\n        }\r\n    };\r\n\r\n    const prevStep = () => {\r\n        if (currentStep > FORM_STEPS.BASIC_INFO) setCurrentStep(currentStep - 1);\r\n    };\r\n\r\n    /** Submit */\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!validateStep(FORM_STEPS.BASIC_INFO) || !validateStep(FORM_STEPS.DETAILS)) {\r\n            setCurrentStep(FORM_STEPS.BASIC_INFO);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Prepare data for API - PostgreSQL format\r\n            const taskData = {\r\n                // Include ID if editing\r\n                ...(isEditing && { id: task.id }),\r\n\r\n                // Basic fields\r\n                title: formData.title.trim(),\r\n                description: formData.description.trim(),\r\n                status: formData.status,\r\n                priority: formData.priority,\r\n\r\n                // Dates - null if empty\r\n                start_date: formData.start_date || null,\r\n                due_date: formData.due_date || null,\r\n\r\n                // Numbers - null if empty, convert to int if not\r\n                estimated_hours: formData.estimated_hours ? parseInt(formData.estimated_hours, 10) : null,\r\n\r\n                // User assignment - ensure we have a valid user ID\r\n                assigned_to: formData.assigned_to ? parseInt(formData.assigned_to, 10) : (currentUser?.id || null),\r\n\r\n                // Categories - null if empty, convert to int if not\r\n                category_id: formData.category_id ? parseInt(formData.category_id, 10) : null,\r\n                department_id: formData.department_id ? parseInt(formData.department_id, 10) : (currentUser?.department_id || null)\r\n            };\r\n\r\n            await onSave(taskData);\r\n            clearDraft();\r\n        } catch (error) {\r\n            console.error('Form submission error:', error);\r\n            setSubmitError(error.message || 'Có lỗi xảy ra khi lưu task. Vui lòng thử lại.');\r\n        }\r\n    };\r\n\r\n    /** UI từng bước */\r\n    const renderStepContent = () => {\r\n        switch (currentStep) {\r\n            case FORM_STEPS.BASIC_INFO:\r\n                return (\r\n                    <div className=\"space-y-5 sm:space-y-6\">\r\n                        {isDraft && (\r\n                            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-3 sm:p-4\">\r\n                                <div className=\"flex items-center gap-2 text-sm\">\r\n                                    <span className=\"text-blue-500\">💾</span>\r\n                                    <span className=\"text-blue-700\">Bản nháp đã được lưu tự động</span>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={clearDraft}\r\n                                        className=\"ml-auto text-blue-600 hover:text-blue-800 underline\"\r\n                                    >\r\n                                        Xóa bản nháp\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div>\r\n                            <label htmlFor=\"title\" className=\"block text-sm font-semibold text-gray-700 mb-1.5\">\r\n                                <FileText className=\"w-4 h-4 inline mr-1\" />\r\n                                Tiêu đề Task *\r\n                            </label>\r\n                            <input\r\n                                ref={titleRef}\r\n                                id=\"title\"\r\n                                type=\"text\"\r\n                                value={formData.title}\r\n                                onChange={(e) => handleInputChange('title', e.target.value)}\r\n                                className={[\r\n                                    'w-full px-4 py-3 rounded-xl border shadow-sm transition',\r\n                                    errors.title\r\n                                        ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent'\r\n                                        : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n                                ].join(' ')}\r\n                                placeholder=\"Nhập tiêu đề task...\"\r\n                                maxLength={200}\r\n                                disabled={isLoading}\r\n                            />\r\n                            {errors.title && <p className=\"text-sm text-red-600 mt-1 flex items-center\">\r\n                                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                {errors.title}\r\n                            </p>}\r\n                            <p className=\"text-xs text-gray-500 mt-1\">{formData.title.length}/200 ký tự</p>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-1.5\">Mô tả chi tiết</label>\r\n                            <RichTextEditor\r\n                                value={formData.description}\r\n                                onChange={(v) => handleInputChange('description', v)}\r\n                                placeholder=\"Nhập mô tả chi tiết cho task (hỗ trợ Bold / Italic / Underline / List)...\"\r\n                                disabled={isLoading}\r\n                            />\r\n                            {errors.description && <p className=\"text-sm text-red-600 mt-1 flex items-center\">\r\n                                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                {errors.description}\r\n                            </p>}\r\n                            <p className=\"text-xs text-gray-500 mt-1\">Gợi ý: Viết ngắn gọn, rõ ràng và có checklist nếu cần.</p>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            case FORM_STEPS.DETAILS:\r\n                return (\r\n                    <div className=\"space-y-5 sm:space-y-6\">\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-1.5\">Trạng thái *</label>\r\n                                <select\r\n                                    value={formData.status}\r\n                                    onChange={(e) => handleInputChange('status', e.target.value)}\r\n                                    className={[\r\n                                        'w-full px-4 py-3 rounded-xl border shadow-sm bg-white transition',\r\n                                        errors.status\r\n                                            ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent'\r\n                                            : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n                                    ].join(' ')}\r\n                                    disabled={isLoading}\r\n                                >\r\n                                    <option value={TASK_STATUS.TODO}>⏳ Chờ làm</option>\r\n                                    <option value={TASK_STATUS.IN_PROGRESS}>🔄 Đang làm</option>\r\n                                    <option value={TASK_STATUS.REVIEW}>👁️ Đang duyệt</option>\r\n                                    <option value={TASK_STATUS.COMPLETED}>✅ Hoàn thành</option>\r\n                                    <option value={TASK_STATUS.CANCELLED}>❌ Đã hủy</option>\r\n                                </select>\r\n                                {errors.status && <p className=\"text-sm text-red-600 mt-1 flex items-center\">\r\n                                    <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                    {errors.status}\r\n                                </p>}\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-1.5\">\r\n                                    <Flag className=\"w-4 h-4 inline mr-1\" />\r\n                                    Độ ưu tiên *\r\n                                </label>\r\n                                <select\r\n                                    value={formData.priority}\r\n                                    onChange={(e) => handleInputChange('priority', e.target.value)}\r\n                                    className={[\r\n                                        'w-full px-4 py-3 rounded-xl border shadow-sm bg-white transition',\r\n                                        errors.priority\r\n                                            ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent'\r\n                                            : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n                                    ].join(' ')}\r\n                                    disabled={isLoading}\r\n                                >\r\n                                    <option value={TASK_PRIORITY.LOW}>🔵 Thấp</option>\r\n                                    <option value={TASK_PRIORITY.MEDIUM}>🟡 Trung bình</option>\r\n                                    <option value={TASK_PRIORITY.HIGH}>🔴 Cao</option>\r\n                                    <option value={TASK_PRIORITY.URGENT}>🚨 Khẩn cấp</option>\r\n                                </select>\r\n                                {errors.priority && <p className=\"text-sm text-red-600 mt-1 flex items-center\">\r\n                                    <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                    {errors.priority}\r\n                                </p>}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-1.5\">\r\n                                    <Calendar className=\"w-4 h-4 inline mr-1\" />\r\n                                    Ngày bắt đầu\r\n                                </label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={formData.start_date}\r\n                                    onChange={(e) => handleInputChange('start_date', e.target.value)}\r\n                                    className={[\r\n                                        'w-full px-4 py-3 rounded-xl border shadow-sm transition',\r\n                                        errors.start_date\r\n                                            ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent'\r\n                                            : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n                                    ].join(' ')}\r\n                                    disabled={isLoading}\r\n                                />\r\n                                {errors.start_date && <p className=\"text-sm text-red-600 mt-1 flex items-center\">\r\n                                    <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                    {errors.start_date}\r\n                                </p>}\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-semibold text-gray-700 mb-1.5\">\r\n                                    <Calendar className=\"w-4 h-4 inline mr-1\" />\r\n                                    Ngày hết hạn\r\n                                </label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={formData.due_date}\r\n                                    onChange={(e) => handleInputChange('due_date', e.target.value)}\r\n                                    min={getTodayDate()}\r\n                                    className={[\r\n                                        'w-full px-4 py-3 rounded-xl border shadow-sm transition',\r\n                                        errors.due_date\r\n                                            ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent'\r\n                                            : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n                                    ].join(' ')}\r\n                                    disabled={isLoading}\r\n                                />\r\n                                {errors.due_date && <p className=\"text-sm text-red-600 mt-1 flex items-center\">\r\n                                    <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                    {errors.due_date}\r\n                                </p>}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-1.5\">\r\n                                <Clock className=\"w-4 h-4 inline mr-1\" />\r\n                                Số giờ ước tính\r\n                            </label>\r\n                            <input\r\n                                type=\"number\"\r\n                                value={formData.estimated_hours}\r\n                                onChange={(e) => handleInputChange('estimated_hours', e.target.value)}\r\n                                min=\"1\"\r\n                                max=\"1000\"\r\n                                className={[\r\n                                    'w-full px-4 py-3 rounded-xl border shadow-sm transition',\r\n                                    errors.estimated_hours\r\n                                        ? 'border-red-300 focus:ring-2 focus:ring-red-500 focus:border-transparent'\r\n                                        : 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent',\r\n                                ].join(' ')}\r\n                                placeholder=\"Nhập số giờ ước tính...\"\r\n                                disabled={isLoading}\r\n                            />\r\n                            {errors.estimated_hours && <p className=\"text-sm text-red-600 mt-1 flex items-center\">\r\n                                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                                {errors.estimated_hours}\r\n                            </p>}\r\n                        </div>\r\n\r\n                        {/* User info display */}\r\n                        {currentUser && (\r\n                            <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                                <div className=\"flex items-center space-x-2 text-sm text-blue-800\">\r\n                                    <User className=\"w-4 h-4\" />\r\n                                    <span>\r\n                                        Người tạo: {currentUser.full_name || currentUser.username} (ID: {currentUser.id})\r\n                                        {currentUser.department_id && ` | Phòng ban: ${currentUser.department_id}`}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                );\r\n\r\n            case FORM_STEPS.REVIEW:\r\n                return (\r\n                    <div className=\"space-y-5 sm:space-y-6\">\r\n                        <div className=\"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 shadow-sm\">\r\n                            <h4 className=\"text-base sm:text-lg font-semibold text-gray-900 mb-4\">Xem lại thông tin</h4>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <span className=\"text-sm font-medium text-gray-600\">Tiêu đề:</span>\r\n                                    <p className=\"text-gray-900 text-sm sm:text-base mt-1\">{formData.title}</p>\r\n                                </div>\r\n\r\n                                {formData.description && (\r\n                                    <div>\r\n                                        <span className=\"text-sm font-medium text-gray-600\">Mô tả:</span>\r\n                                        <div\r\n                                            className=\"text-gray-900 bg-gray-50 p-3 rounded-lg border text-sm sm:text-base mt-1 prose max-w-none\"\r\n                                            dangerouslySetInnerHTML={{ __html: formData.description }}\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4\">\r\n                                    <div>\r\n                                        <span className=\"text-sm font-medium text-gray-600\">Trạng thái:</span>\r\n                                        <p className=\"text-gray-900 text-sm sm:text-base mt-1\">\r\n                                            {formData.status === TASK_STATUS.TODO\r\n                                                ? '⏳ Chờ làm'\r\n                                                : formData.status === TASK_STATUS.IN_PROGRESS\r\n                                                    ? '🔄 Đang làm'\r\n                                                    : formData.status === TASK_STATUS.REVIEW\r\n                                                        ? '👁️ Đang duyệt'\r\n                                                        : formData.status === TASK_STATUS.COMPLETED\r\n                                                            ? '✅ Hoàn thành'\r\n                                                            : '❌ Đã hủy'}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <span className=\"text-sm font-medium text-gray-600\">Độ ưu tiên:</span>\r\n                                        <p className=\"text-gray-900 text-sm sm:text-base mt-1\">\r\n                                            {formData.priority === TASK_PRIORITY.LOW\r\n                                                ? '🔵 Thấp'\r\n                                                : formData.priority === TASK_PRIORITY.MEDIUM\r\n                                                    ? '🟡 Trung bình'\r\n                                                    : formData.priority === TASK_PRIORITY.HIGH\r\n                                                        ? '🔴 Cao'\r\n                                                        : '🚨 Khẩn cấp'}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <span className=\"text-sm font-medium text-gray-600\">Số giờ ước tính:</span>\r\n                                        <p className=\"text-gray-900 text-sm sm:text-base mt-1\">\r\n                                            {formData.estimated_hours ? `${formData.estimated_hours} giờ` : 'Chưa đặt'}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\r\n                                    <div>\r\n                                        <span className=\"text-sm font-medium text-gray-600\">Ngày bắt đầu:</span>\r\n                                        <p className=\"text-gray-900 text-sm sm:text-base mt-1\">\r\n                                            {formData.start_date\r\n                                                ? `📅 ${new Date(formData.start_date).toLocaleDateString('vi-VN')}`\r\n                                                : 'Chưa đặt'}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <span className=\"text-sm font-medium text-gray-600\">Ngày hết hạn:</span>\r\n                                        <p className=\"text-gray-900 text-sm sm:text-base mt-1\">\r\n                                            {formData.due_date\r\n                                                ? `📅 ${new Date(formData.due_date).toLocaleDateString('vi-VN')}`\r\n                                                : 'Chưa đặt'}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                                    <p className=\"text-sm text-blue-700 flex items-center\">\r\n                                        <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n                                        ✓ Thông tin đã sẵn sàng. Nhấn \"Lưu Task\" để hoàn tất.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    const steps = Object.keys(FORM_STEPS_CONFIG);\r\n\r\n    // Đảm bảo có user context\r\n    if (!currentUser) {\r\n        return (\r\n            <div className=\"p-6 text-center\">\r\n                <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Không có thông tin người dùng</h3>\r\n                <p className=\"text-gray-600 mb-4\">Vui lòng đăng nhập để sử dụng tính năng này.</p>\r\n                <button\r\n                    onClick={onCancel}\r\n                    className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n                >\r\n                    Đóng\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-4 sm:p-6 max-w-4xl mx-auto\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-6 sm:mb-8\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n                        {isEditing ? (\r\n                            <Edit3 className=\"w-5 h-5 text-blue-600\" />\r\n                        ) : (\r\n                            <Plus className=\"w-5 h-5 text-blue-600\" />\r\n                        )}\r\n                    </div>\r\n                    <div>\r\n                        <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">\r\n                            {isEditing ? 'Chỉnh sửa Task' : 'Tạo Task Mới'}\r\n                        </h2>\r\n                        <p className=\"text-gray-600 text-sm sm:text-base\">Điền theo từng bước để hoàn tất task của bạn</p>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={onCancel}\r\n                    disabled={isLoading}\r\n                    className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\r\n                    title=\"Đóng\"\r\n                >\r\n                    <X className=\"w-5 h-5\" />\r\n                </button>\r\n            </div>\r\n\r\n            <form ref={formRef} onSubmit={handleSubmit} className=\"bg-white border border-gray-200 rounded-2xl shadow-sm p-4 sm:p-6\">\r\n                {/* Nav bước */}\r\n                <StepNavigation\r\n                    currentStep={currentStep}\r\n                    steps={steps}\r\n                    onStepChange={goToStep}\r\n                    disabled={isLoading}\r\n                />\r\n\r\n                {/* Lỗi submit tổng */}\r\n                {submitError && (\r\n                    <div className=\"mb-4 sm:mb-6\">\r\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3\">\r\n                            <AlertCircle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\r\n                            <div>\r\n                                <h4 className=\"font-medium text-red-900\">Có lỗi xảy ra</h4>\r\n                                <p className=\"text-sm text-red-700 mt-1\">{submitError}</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setSubmitError('')}\r\n                                className=\"text-red-400 hover:text-red-600\"\r\n                                title=\"Đóng\"\r\n                            >\r\n                                <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Nội dung từng bước */}\r\n                <div className=\"mb-6 sm:mb-8\">{renderStepContent()}</div>\r\n\r\n                {/* Action */}\r\n                <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 pt-4 sm:pt-6 border-t border-gray-200\">\r\n                    <div className=\"flex gap-3 order-2 sm:order-1\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onCancel}\r\n                            disabled={isLoading}\r\n                            className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition disabled:opacity-50\"\r\n                        >\r\n                            Hủy\r\n                        </button>\r\n\r\n                        {currentStep > FORM_STEPS.BASIC_INFO && (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={prevStep}\r\n                                disabled={isLoading}\r\n                                className=\"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-xl hover:bg-blue-200 transition disabled:opacity-50 inline-flex items-center\"\r\n                            >\r\n                                <ChevronLeft className=\"w-4 h-4 mr-1\" />\r\n                                Quay lại\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"order-1 sm:order-2\">\r\n                        {currentStep < FORM_STEPS.REVIEW ? (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={nextStep}\r\n                                disabled={isLoading}\r\n                                className=\"px-5 py-2 text-sm font-medium text-white rounded-xl shadow-sm bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transition disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center\"\r\n                            >\r\n                                Tiếp theo\r\n                                <ChevronRight className=\"w-4 h-4 ml-1\" />\r\n                            </button>\r\n                        ) : (\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isLoading}\r\n                                className=\"px-6 py-2 text-sm font-medium text-white rounded-xl shadow-sm bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2\"\r\n                            >\r\n                                {isLoading ? (\r\n                                    <>\r\n                                        <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"></div>\r\n                                        <span>Đang lưu...</span>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <Save className=\"w-4 h-4\" />\r\n                                        <span>{isEditing ? 'Cập nhật Task' : 'Lưu Task'}</span>\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Tiến độ */}\r\n                <div className=\"mt-4\">\r\n                    <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\r\n                        <span>Tiến độ hoàn thành</span>\r\n                        <span>{Math.round((currentStep / FORM_STEPS.REVIEW) * 100)}%</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                        <div\r\n                            className=\"bg-gradient-to-r from-blue-500 to-emerald-500 h-2 rounded-full transition-all duration-300\"\r\n                            style={{ width: `${(currentStep / FORM_STEPS.REVIEW) * 100}%` }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}