{"ast":null,"code":"var _jsxFileName = \"D:\\\\Stratix\\\\frontend\\\\src\\\\components\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { api } from '../../services/api';\nimport { STORAGE_KEYS, ERROR_MESSAGES } from '../constants/TaskConstants';\n\n// Create context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\n\n// Custom hook ƒë·ªÉ s·ª≠ d·ª•ng context\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\n// Auth Provider component\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  // Ki·ªÉm tra authentication khi app kh·ªüi ƒë·ªông\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  // Ki·ªÉm tra xem user ƒë√£ ƒëƒÉng nh·∫≠p ch∆∞a\n  const checkAuth = async () => {\n    try {\n      const token = localStorage.getItem(STORAGE_KEYS.ACCESS_TOKEN);\n      if (!token) {\n        setIsLoading(false);\n        return;\n      }\n\n      // G·ªçi API ƒë·ªÉ l·∫•y th√¥ng tin user hi·ªán t·∫°i\n      const response = await api.getCurrentUser();\n      if (response.user) {\n        setUser(response.user);\n        setIsAuthenticated(true);\n      }\n    } catch (error) {\n      console.error('Auth check failed:', error);\n      // N·∫øu token kh√¥ng h·ª£p l·ªá, x√≥a kh·ªèi localStorage\n      localStorage.removeItem(STORAGE_KEYS.ACCESS_TOKEN);\n      localStorage.removeItem(STORAGE_KEYS.REFRESH_TOKEN);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // ƒêƒÉng nh·∫≠p\n  const login = async credentials => {\n    console.log('Login function called with:', credentials); // Debug log\n    try {\n      setIsLoading(true);\n      const response = await api.login(credentials);\n      console.log('Login response:', response); // Debug log\n\n      if (response.user && response.accessToken) {\n        setUser(response.user);\n        setIsAuthenticated(true);\n\n        // L∆∞u tokens v√†o localStorage (ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω trong api.js)\n        return {\n          success: true,\n          user: response.user\n        };\n      }\n      throw new Error('Invalid login response');\n    } catch (error) {\n      console.error('Login failed:', error);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // ƒêƒÉng k√Ω\n  const register = async userData => {\n    console.log('Register function called with:', userData); // Debug log\n    try {\n      setIsLoading(true);\n      const response = await api.register(userData);\n      console.log('Register response:', response); // Debug log\n\n      if (response.user && response.accessToken) {\n        setUser(response.user);\n        setIsAuthenticated(true);\n        return {\n          success: true,\n          user: response.user\n        };\n      }\n      throw new Error('Invalid registration response');\n    } catch (error) {\n      console.error('Registration failed:', error);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // ƒêƒÉng xu·∫•t\n  const logout = async () => {\n    try {\n      await api.logout();\n    } catch (error) {\n      console.error('Logout API failed:', error);\n      // V·∫´n ti·∫øp t·ª•c logout local d√π API fail\n    } finally {\n      // Clear local state\n      setUser(null);\n      setIsAuthenticated(false);\n\n      // Clear localStorage\n      localStorage.removeItem(STORAGE_KEYS.ACCESS_TOKEN);\n      localStorage.removeItem(STORAGE_KEYS.REFRESH_TOKEN);\n\n      // Redirect ho·∫∑c reload trang\n      window.location.href = '/login';\n    }\n  };\n\n  // C·∫≠p nh·∫≠t th√¥ng tin user\n  const updateUser = userData => {\n    setUser(prevUser => ({\n      ...prevUser,\n      ...userData\n    }));\n  };\n\n  // Ki·ªÉm tra quy·ªÅn h·∫°n\n  const hasPermission = permission => {\n    if (!user || !user.permissions) return false;\n    return user.permissions.some(p => p.name === permission);\n  };\n\n  // Ki·ªÉm tra role level\n  const hasLevel = maxLevel => {\n    if (!user || !user.role_level) return false;\n    return user.role_level <= maxLevel;\n  };\n\n  // Ki·ªÉm tra role c·ª• th·ªÉ\n  const hasRole = role => {\n    if (!user || !user.role_name) return false;\n    return user.role_name === role;\n  };\n\n  // L·∫•y th√¥ng tin ng∆∞·ªùi d√πng hi·ªán t·∫°i (refresh)\n  const refreshUser = async () => {\n    try {\n      const response = await api.getCurrentUser();\n      if (response.user) {\n        setUser(response.user);\n        return response.user;\n      }\n    } catch (error) {\n      console.error('Failed to refresh user:', error);\n      // N·∫øu fail, c√≥ th·ªÉ do token h·∫øt h·∫°n\n      await logout();\n      throw error;\n    }\n  };\n\n  // ƒê·ªïi m·∫≠t kh·∫©u\n  const changePassword = async passwordData => {\n    try {\n      await api.changePassword(passwordData);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Change password failed:', error);\n      throw error;\n    }\n  };\n\n  // Value ƒë∆∞·ª£c cung c·∫•p cho context\n  const value = {\n    // State\n    user,\n    isLoading,\n    isAuthenticated,\n    // Actions - ƒê·∫¢M B·∫¢O C√ÅC FUNCTION N√ÄY ƒê∆Ø·ª¢C EXPORT\n    login,\n    register,\n    logout,\n    updateUser,\n    refreshUser,\n    changePassword,\n    // Permission checks\n    hasPermission,\n    hasLevel,\n    hasRole,\n    // Utilities\n    checkAuth\n  };\n  console.log('AuthContext value:', value); // Debug log\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n};\n\n// HOC ƒë·ªÉ b·∫£o v·ªá routes c·∫ßn authentication\n_s2(AuthProvider, \"BKa16Kz0rM4B0y8AT6EXjU1HOY4=\");\n_c = AuthProvider;\nexport const withAuth = Component => {\n  var _s3 = $RefreshSig$();\n  return _s3(function AuthenticatedComponent(props) {\n    _s3();\n    const {\n      isAuthenticated,\n      isLoading\n    } = useAuth();\n    if (isLoading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"\\u0110ang ki\\u1EC3m tra \\u0111\\u0103ng nh\\u1EADp...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this);\n    }\n    if (!isAuthenticated) {\n      window.location.href = '/login';\n      return null;\n    }\n    return /*#__PURE__*/_jsxDEV(Component, {\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 16\n    }, this);\n  }, \"yb/FJYAIXt7wZoU4a4YvGQ4Nlsc=\", false, function () {\n    return [useAuth];\n  });\n};\n\n// HOC ƒë·ªÉ b·∫£o v·ªá routes theo permission\nexport const withPermission = (Component, requiredPermission) => {\n  var _s4 = $RefreshSig$();\n  return _s4(function PermissionProtectedComponent(props) {\n    _s4();\n    const {\n      hasPermission,\n      isLoading\n    } = useAuth();\n    if (isLoading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"\\u0110ang ki\\u1EC3m tra quy\\u1EC1n h\\u1EA1n...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }, this);\n    }\n    if (!hasPermission(requiredPermission)) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen flex items-center justify-center bg-gray-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center max-w-md mx-auto p-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-2xl\",\n              children: \"\\uD83D\\uDEAB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-gray-900 mb-2\",\n            children: \"Kh\\xF4ng c\\xF3 quy\\u1EC1n truy c\\u1EADp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-6\",\n            children: \"B\\u1EA1n kh\\xF4ng c\\xF3 quy\\u1EC1n truy c\\u1EADp t\\xEDnh n\\u0103ng n\\xE0y. Vui l\\xF2ng li\\xEAn h\\u1EC7 qu\\u1EA3n tr\\u1ECB vi\\xEAn.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.history.back(),\n            className: \"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n            children: \"Quay l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Component, {\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 16\n    }, this);\n  }, \"5x7Izvu2KAi3cmMNt8LiZunD9RQ=\", false, function () {\n    return [useAuth];\n  });\n};\n\n// HOC ƒë·ªÉ b·∫£o v·ªá routes theo role level\nexport const withLevel = (Component, maxLevel) => {\n  var _s5 = $RefreshSig$();\n  return _s5(function LevelProtectedComponent(props) {\n    _s5();\n    const {\n      hasLevel,\n      isLoading,\n      user\n    } = useAuth();\n    if (isLoading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"\\u0110ang ki\\u1EC3m tra quy\\u1EC1n h\\u1EA1n...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }, this);\n    }\n    if (!hasLevel(maxLevel)) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen flex items-center justify-center bg-gray-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center max-w-md mx-auto p-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-2xl\",\n              children: \"\\uD83D\\uDD12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-gray-900 mb-2\",\n            children: \"C\\u1EA5p quy\\u1EC1n kh\\xF4ng \\u0111\\u1EE7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-6\",\n            children: [\"T\\xEDnh n\\u0103ng n\\xE0y y\\xEAu c\\u1EA7u c\\u1EA5p quy\\u1EC1n cao h\\u01A1n. C\\u1EA5p c\\u1EE7a b\\u1EA1n: \", user === null || user === void 0 ? void 0 : user.role_display_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.history.back(),\n            className: \"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n            children: \"Quay l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Component, {\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 16\n    }, this);\n  }, \"yP61PEx5LVac9pV2qjVUqlkTfJU=\", false, function () {\n    return [useAuth];\n  });\n};\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","api","STORAGE_KEYS","ERROR_MESSAGES","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","context","Error","AuthProvider","children","_s2","user","setUser","isLoading","setIsLoading","isAuthenticated","setIsAuthenticated","checkAuth","token","localStorage","getItem","ACCESS_TOKEN","response","getCurrentUser","error","console","removeItem","REFRESH_TOKEN","login","credentials","log","accessToken","success","register","userData","logout","window","location","href","updateUser","prevUser","hasPermission","permission","permissions","some","p","name","hasLevel","maxLevel","role_level","hasRole","role","role_name","refreshUser","changePassword","passwordData","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","withAuth","Component","_s3","$RefreshSig$","AuthenticatedComponent","props","className","withPermission","requiredPermission","_s4","PermissionProtectedComponent","onClick","history","back","withLevel","_s5","LevelProtectedComponent","role_display_name","$RefreshReg$"],"sources":["D:/Stratix/frontend/src/components/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\nimport { STORAGE_KEYS, ERROR_MESSAGES } from '../constants/TaskConstants';\r\n\r\n// Create context\r\nconst AuthContext = createContext(null);\r\n\r\n// Custom hook ƒë·ªÉ s·ª≠ d·ª•ng context\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\n// Auth Provider component\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n    // Ki·ªÉm tra authentication khi app kh·ªüi ƒë·ªông\r\n    useEffect(() => {\r\n        checkAuth();\r\n    }, []);\r\n\r\n    // Ki·ªÉm tra xem user ƒë√£ ƒëƒÉng nh·∫≠p ch∆∞a\r\n    const checkAuth = async () => {\r\n        try {\r\n            const token = localStorage.getItem(STORAGE_KEYS.ACCESS_TOKEN);\r\n            if (!token) {\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n\r\n            // G·ªçi API ƒë·ªÉ l·∫•y th√¥ng tin user hi·ªán t·∫°i\r\n            const response = await api.getCurrentUser();\r\n            if (response.user) {\r\n                setUser(response.user);\r\n                setIsAuthenticated(true);\r\n            }\r\n        } catch (error) {\r\n            console.error('Auth check failed:', error);\r\n            // N·∫øu token kh√¥ng h·ª£p l·ªá, x√≥a kh·ªèi localStorage\r\n            localStorage.removeItem(STORAGE_KEYS.ACCESS_TOKEN);\r\n            localStorage.removeItem(STORAGE_KEYS.REFRESH_TOKEN);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // ƒêƒÉng nh·∫≠p\r\n    const login = async (credentials) => {\r\n        console.log('Login function called with:', credentials); // Debug log\r\n        try {\r\n            setIsLoading(true);\r\n            const response = await api.login(credentials);\r\n            console.log('Login response:', response); // Debug log\r\n\r\n            if (response.user && response.accessToken) {\r\n                setUser(response.user);\r\n                setIsAuthenticated(true);\r\n\r\n                // L∆∞u tokens v√†o localStorage (ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω trong api.js)\r\n                return { success: true, user: response.user };\r\n            }\r\n\r\n            throw new Error('Invalid login response');\r\n        } catch (error) {\r\n            console.error('Login failed:', error);\r\n            throw error;\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // ƒêƒÉng k√Ω\r\n    const register = async (userData) => {\r\n        console.log('Register function called with:', userData); // Debug log\r\n        try {\r\n            setIsLoading(true);\r\n            const response = await api.register(userData);\r\n            console.log('Register response:', response); // Debug log\r\n\r\n            if (response.user && response.accessToken) {\r\n                setUser(response.user);\r\n                setIsAuthenticated(true);\r\n                return { success: true, user: response.user };\r\n            }\r\n\r\n            throw new Error('Invalid registration response');\r\n        } catch (error) {\r\n            console.error('Registration failed:', error);\r\n            throw error;\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // ƒêƒÉng xu·∫•t\r\n    const logout = async () => {\r\n        try {\r\n            await api.logout();\r\n        } catch (error) {\r\n            console.error('Logout API failed:', error);\r\n            // V·∫´n ti·∫øp t·ª•c logout local d√π API fail\r\n        } finally {\r\n            // Clear local state\r\n            setUser(null);\r\n            setIsAuthenticated(false);\r\n\r\n            // Clear localStorage\r\n            localStorage.removeItem(STORAGE_KEYS.ACCESS_TOKEN);\r\n            localStorage.removeItem(STORAGE_KEYS.REFRESH_TOKEN);\r\n\r\n            // Redirect ho·∫∑c reload trang\r\n            window.location.href = '/login';\r\n        }\r\n    };\r\n\r\n    // C·∫≠p nh·∫≠t th√¥ng tin user\r\n    const updateUser = (userData) => {\r\n        setUser(prevUser => ({\r\n            ...prevUser,\r\n            ...userData\r\n        }));\r\n    };\r\n\r\n    // Ki·ªÉm tra quy·ªÅn h·∫°n\r\n    const hasPermission = (permission) => {\r\n        if (!user || !user.permissions) return false;\r\n        return user.permissions.some(p => p.name === permission);\r\n    };\r\n\r\n    // Ki·ªÉm tra role level\r\n    const hasLevel = (maxLevel) => {\r\n        if (!user || !user.role_level) return false;\r\n        return user.role_level <= maxLevel;\r\n    };\r\n\r\n    // Ki·ªÉm tra role c·ª• th·ªÉ\r\n    const hasRole = (role) => {\r\n        if (!user || !user.role_name) return false;\r\n        return user.role_name === role;\r\n    };\r\n\r\n    // L·∫•y th√¥ng tin ng∆∞·ªùi d√πng hi·ªán t·∫°i (refresh)\r\n    const refreshUser = async () => {\r\n        try {\r\n            const response = await api.getCurrentUser();\r\n            if (response.user) {\r\n                setUser(response.user);\r\n                return response.user;\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to refresh user:', error);\r\n            // N·∫øu fail, c√≥ th·ªÉ do token h·∫øt h·∫°n\r\n            await logout();\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    // ƒê·ªïi m·∫≠t kh·∫©u\r\n    const changePassword = async (passwordData) => {\r\n        try {\r\n            await api.changePassword(passwordData);\r\n            return { success: true };\r\n        } catch (error) {\r\n            console.error('Change password failed:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    // Value ƒë∆∞·ª£c cung c·∫•p cho context\r\n    const value = {\r\n        // State\r\n        user,\r\n        isLoading,\r\n        isAuthenticated,\r\n\r\n        // Actions - ƒê·∫¢M B·∫¢O C√ÅC FUNCTION N√ÄY ƒê∆Ø·ª¢C EXPORT\r\n        login,\r\n        register,\r\n        logout,\r\n        updateUser,\r\n        refreshUser,\r\n        changePassword,\r\n\r\n        // Permission checks\r\n        hasPermission,\r\n        hasLevel,\r\n        hasRole,\r\n\r\n        // Utilities\r\n        checkAuth\r\n    };\r\n\r\n    console.log('AuthContext value:', value); // Debug log\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\n// HOC ƒë·ªÉ b·∫£o v·ªá routes c·∫ßn authentication\r\nexport const withAuth = (Component) => {\r\n    return function AuthenticatedComponent(props) {\r\n        const { isAuthenticated, isLoading } = useAuth();\r\n\r\n        if (isLoading) {\r\n            return (\r\n                <div className=\"min-h-screen flex items-center justify-center\">\r\n                    <div className=\"text-center\">\r\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4\"></div>\r\n                        <p className=\"text-gray-600\">ƒêang ki·ªÉm tra ƒëƒÉng nh·∫≠p...</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (!isAuthenticated) {\r\n            window.location.href = '/login';\r\n            return null;\r\n        }\r\n\r\n        return <Component {...props} />;\r\n    };\r\n};\r\n\r\n// HOC ƒë·ªÉ b·∫£o v·ªá routes theo permission\r\nexport const withPermission = (Component, requiredPermission) => {\r\n    return function PermissionProtectedComponent(props) {\r\n        const { hasPermission, isLoading } = useAuth();\r\n\r\n        if (isLoading) {\r\n            return (\r\n                <div className=\"min-h-screen flex items-center justify-center\">\r\n                    <div className=\"text-center\">\r\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4\"></div>\r\n                        <p className=\"text-gray-600\">ƒêang ki·ªÉm tra quy·ªÅn h·∫°n...</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (!hasPermission(requiredPermission)) {\r\n            return (\r\n                <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                    <div className=\"text-center max-w-md mx-auto p-8\">\r\n                        <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <span className=\"text-2xl\">üö´</span>\r\n                        </div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Kh√¥ng c√≥ quy·ªÅn truy c·∫≠p</h2>\r\n                        <p className=\"text-gray-600 mb-6\">\r\n                            B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p t√≠nh nƒÉng n√†y. Vui l√≤ng li√™n h·ªá qu·∫£n tr·ªã vi√™n.\r\n                        </p>\r\n                        <button\r\n                            onClick={() => window.history.back()}\r\n                            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                        >\r\n                            Quay l·∫°i\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return <Component {...props} />;\r\n    };\r\n};\r\n\r\n// HOC ƒë·ªÉ b·∫£o v·ªá routes theo role level\r\nexport const withLevel = (Component, maxLevel) => {\r\n    return function LevelProtectedComponent(props) {\r\n        const { hasLevel, isLoading, user } = useAuth();\r\n\r\n        if (isLoading) {\r\n            return (\r\n                <div className=\"min-h-screen flex items-center justify-center\">\r\n                    <div className=\"text-center\">\r\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4\"></div>\r\n                        <p className=\"text-gray-600\">ƒêang ki·ªÉm tra quy·ªÅn h·∫°n...</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (!hasLevel(maxLevel)) {\r\n            return (\r\n                <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                    <div className=\"text-center max-w-md mx-auto p-8\">\r\n                        <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <span className=\"text-2xl\">üîí</span>\r\n                        </div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">C·∫•p quy·ªÅn kh√¥ng ƒë·ªß</h2>\r\n                        <p className=\"text-gray-600 mb-6\">\r\n                            T√≠nh nƒÉng n√†y y√™u c·∫ßu c·∫•p quy·ªÅn cao h∆°n. C·∫•p c·ªßa b·∫°n: {user?.role_display_name}\r\n                        </p>\r\n                        <button\r\n                            onClick={() => window.history.back()}\r\n                            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                        >\r\n                            Quay l·∫°i\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return <Component {...props} />;\r\n    };\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}