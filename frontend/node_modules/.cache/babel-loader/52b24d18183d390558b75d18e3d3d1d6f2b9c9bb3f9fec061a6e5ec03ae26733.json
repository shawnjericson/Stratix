{"ast":null,"code":"var _jsxFileName = \"D:\\\\Stratix\\\\frontend\\\\src\\\\components\\\\Tasks\\\\TaskManagement.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Plus, Search, RotateCcw, SlidersHorizontal, X, Filter, Clock, CheckCircle2, AlertTriangle, Users, Flag, User, Target } from 'lucide-react';\nimport TaskList from './TaskLists';\nimport TaskForm from './TaskForm';\nimport ErrorMessage from '../Common/ErrorMessage';\n\n// Import API service\nimport { api } from '../../services/api';\n\n// Custom hook for debounced value\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useDebounce = (value, delay) => {\n  _s();\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n};\n\n// Filter Option Component\n_s(useDebounce, \"KDuPAtDOgxm8PU6legVJOb3oOmA=\");\nconst FilterOption = ({\n  icon: Icon,\n  label,\n  value,\n  isActive,\n  onClick,\n  color = \"blue\"\n}) => {\n  const colorClasses = {\n    blue: isActive ? 'bg-blue-500 text-white border-blue-500' : 'bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100',\n    emerald: isActive ? 'bg-emerald-500 text-white border-emerald-500' : 'bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100',\n    amber: isActive ? 'bg-amber-500 text-white border-amber-500' : 'bg-amber-50 text-amber-700 border-amber-200 hover:bg-amber-100',\n    red: isActive ? 'bg-red-500 text-white border-red-500' : 'bg-red-50 text-red-700 border-red-200 hover:bg-red-100',\n    purple: isActive ? 'bg-purple-500 text-white border-purple-500' : 'bg-purple-50 text-purple-700 border-purple-200 hover:bg-purple-100',\n    gray: isActive ? 'bg-gray-500 text-white border-gray-500' : 'bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100'\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => onClick(value),\n    className: `\n        inline-flex items-center space-x-2 px-3 py-2 rounded-xl border transition-all duration-200\n        text-sm font-medium hover:scale-105 active:scale-95\n        ${colorClasses[color]}\n      `,\n    children: [Icon && /*#__PURE__*/_jsxDEV(Icon, {\n      className: \"w-4 h-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n\n// Quản lý Công việc (Task Management)\n_c = FilterOption;\nexport default function TaskManagement({\n  user,\n  onStatsUpdate\n}) {\n  _s2();\n  // State quản lý danh sách công việc\n  const [tasks, setTasks] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // State cho modal TaskForm\n  const [showTaskForm, setShowTaskForm] = useState(false);\n  const [editingTask, setEditingTask] = useState(null);\n  const [isFormLoading, setIsFormLoading] = useState(false);\n\n  // State cho bộ lọc và tìm kiếm\n  const [filters, setFilters] = useState({\n    status: 'all',\n    priority: 'all',\n    search: '',\n    assignedTo: 'all'\n  });\n\n  // State hiển thị bộ lọc\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Debounced search\n  const debouncedSearch = useDebounce(filters.search, 300);\n\n  // Ref để cuộn danh sách\n  const taskListRef = useRef(null);\n\n  // Tải công việc khi component mount / đổi user\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.id) != null) {\n      loadTasks();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user === null || user === void 0 ? void 0 : user.id]);\n\n  // Effect cho debounced search\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.id) != null && debouncedSearch !== filters.search) {\n      // Có thể implement search qua API ở đây nếu cần\n      // loadTasks({ search: debouncedSearch });\n    }\n  }, [debouncedSearch, user === null || user === void 0 ? void 0 : user.id]);\n\n  // Lấy tất cả công việc từ server\n  const loadTasks = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      console.log('Loading tasks for user:', user === null || user === void 0 ? void 0 : user.id);\n      const response = await api.getTasks();\n      console.log('Tasks response:', response);\n      if (response.tasks) {\n        setTasks(response.tasks);\n      } else if (Array.isArray(response)) {\n        setTasks(response);\n      } else {\n        console.warn('Unexpected response format:', response);\n        setTasks([]);\n      }\n      if (onStatsUpdate) onStatsUpdate();\n    } catch (err) {\n      console.error('Error loading tasks:', err);\n      setError(err.message || 'Không thể tải danh sách công việc. Vui lòng thử lại.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Tạo công việc mới\n  const createTask = async taskData => {\n    setIsFormLoading(true);\n    try {\n      console.log('Creating task:', taskData);\n      const newTaskData = {\n        title: taskData.title,\n        description: taskData.description || '',\n        status: taskData.status || 'todo',\n        priority: taskData.priority || 'medium',\n        start_date: taskData.start_date || null,\n        due_date: taskData.due_date || null,\n        estimated_hours: taskData.estimated_hours || null,\n        assigned_to: taskData.assigned_to || user.id,\n        category_id: taskData.category_id || null,\n        department_id: taskData.department_id || user.department_id\n      };\n      const response = await api.createTask(newTaskData);\n      console.log('Create task response:', response);\n      let createdTask;\n      if (response.task) {\n        createdTask = response.task;\n      } else if (response.data) {\n        createdTask = response.data;\n      } else {\n        createdTask = response;\n      }\n      setTasks(prev => [createdTask, ...prev]);\n      setShowTaskForm(false);\n      setEditingTask(null);\n      if (onStatsUpdate) onStatsUpdate();\n      if (taskListRef.current) {\n        taskListRef.current.scrollIntoView({\n          behavior: 'smooth'\n        });\n      }\n      console.log('Task created successfully');\n    } catch (err) {\n      console.error('Error creating task:', err);\n      throw new Error(err.message || 'Không thể tạo công việc. Vui lòng thử lại.');\n    } finally {\n      setIsFormLoading(false);\n    }\n  };\n\n  // Cập nhật công việc\n  const updateTask = async taskData => {\n    setIsFormLoading(true);\n    try {\n      console.log('Updating task:', taskData);\n      const response = await api.updateTask(taskData.id, taskData);\n      console.log('Update task response:', response);\n      let updatedTask;\n      if (response.task) {\n        updatedTask = response.task;\n      } else if (response.data) {\n        updatedTask = response.data;\n      } else {\n        updatedTask = response;\n      }\n      setTasks(prev => prev.map(task => task.id === updatedTask.id ? updatedTask : task));\n      setShowTaskForm(false);\n      setEditingTask(null);\n      if (onStatsUpdate) onStatsUpdate();\n      console.log('Task updated successfully');\n    } catch (err) {\n      console.error('Error updating task:', err);\n      throw new Error(err.message || 'Không thể cập nhật công việc. Vui lòng thử lại.');\n    } finally {\n      setIsFormLoading(false);\n    }\n  };\n\n  // Xóa công việc\n  const deleteTask = async taskId => {\n    console.log('Deleting task:', taskId);\n    const originalTasks = tasks;\n    setTasks(prev => prev.filter(task => task.id !== taskId));\n    try {\n      await api.deleteTask(taskId);\n      console.log('Task deleted successfully');\n      if (onStatsUpdate) onStatsUpdate();\n    } catch (err) {\n      console.error('Error deleting task:', err);\n      setTasks(originalTasks);\n      setError(err.message || 'Không thể xóa công việc. Vui lòng thử lại.');\n      setTimeout(() => setError(null), 5000);\n    }\n  };\n\n  // Handlers\n  const handleTaskSave = async taskData => {\n    if (editingTask) {\n      await updateTask(taskData);\n    } else {\n      await createTask(taskData);\n    }\n  };\n  const handleEditTask = task => {\n    setEditingTask(task);\n    setShowTaskForm(true);\n  };\n  const handleCreateTask = () => {\n    setEditingTask(null);\n    setShowTaskForm(true);\n  };\n  const handleCancelForm = () => {\n    setShowTaskForm(false);\n    setEditingTask(null);\n  };\n\n  // Filter handlers\n  const handleFilterChange = useCallback((filterType, value) => {\n    setFilters(prev => ({\n      ...prev,\n      [filterType]: prev[filterType] === value ? 'all' : value\n    }));\n  }, []);\n  const handleSearchChange = e => {\n    setFilters(prev => ({\n      ...prev,\n      search: e.target.value\n    }));\n  };\n  const clearAllFilters = () => {\n    setFilters({\n      status: 'all',\n      priority: 'all',\n      search: '',\n      assignedTo: 'all'\n    });\n    setShowFilters(false);\n  };\n\n  // Áp dụng bộ lọc\n  const getFilteredTasks = () => {\n    return tasks.filter(task => {\n      if (filters.status !== 'all' && task.status !== filters.status) return false;\n      if (filters.priority !== 'all' && task.priority !== filters.priority) return false;\n      if (filters.assignedTo !== 'all') {\n        if (filters.assignedTo === 'me' && task.assigned_to !== user.id) return false;\n        if (filters.assignedTo === 'others' && task.assigned_to === user.id) return false;\n        if (filters.assignedTo === 'unassigned' && task.assigned_to) return false;\n      }\n      if (debouncedSearch) {\n        var _task$title, _task$description;\n        const query = debouncedSearch.toLowerCase();\n        const titleMatch = (_task$title = task.title) === null || _task$title === void 0 ? void 0 : _task$title.toLowerCase().includes(query);\n        const descriptionMatch = (_task$description = task.description) === null || _task$description === void 0 ? void 0 : _task$description.toLowerCase().includes(query);\n        if (!titleMatch && !descriptionMatch) return false;\n      }\n      return true;\n    });\n  };\n  const filteredTasks = getFilteredTasks();\n\n  // Thống kê nhanh\n  const getTaskStats = () => {\n    const total = tasks.length;\n    const completed = tasks.filter(t => t.status === 'completed').length;\n    const inProgress = tasks.filter(t => t.status === 'in_progress').length;\n    const todo = tasks.filter(t => t.status === 'todo').length;\n    const overdue = tasks.filter(t => {\n      if (!t.due_date || t.status === 'completed') return false;\n      return new Date(t.due_date) < new Date();\n    }).length;\n    const myTasks = tasks.filter(t => t.assigned_to === user.id).length;\n    return {\n      total,\n      completed,\n      inProgress,\n      todo,\n      overdue,\n      myTasks\n    };\n  };\n  const stats = getTaskStats();\n\n  // Có đang bật bộ lọc không?\n  const hasActiveFilters = filters.status !== 'all' || filters.priority !== 'all' || filters.search !== '' || filters.assignedTo !== 'all';\n  const activeFilterCount = [filters.status !== 'all', filters.priority !== 'all', filters.search !== '', filters.assignedTo !== 'all'].filter(Boolean).length;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full bg-gradient-to-br from-gray-50 to-white\",\n    style: {\n      fontFamily: 'Inter, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/80 backdrop-blur-xl border-b border-gray-200/50 shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-6 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-xl font-bold text-gray-900 mb-1\",\n                children: \"Qu\\u1EA3n l\\xFD c\\xF4ng vi\\u1EC7c\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-4 text-sm text-gray-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"T\\u1ED5ng: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-gray-900\",\n                    children: stats.total\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Ho\\xE0n th\\xE0nh: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-emerald-600\",\n                    children: stats.completed\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u0110ang l\\xE0m: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-blue-600\",\n                    children: stats.inProgress\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 19\n                }, this), stats.overdue > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Tr\\u1EC5 h\\u1EA1n: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold text-red-600\",\n                    children: stats.overdue\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 36\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowFilters(!showFilters),\n              className: `\n                  relative inline-flex items-center px-4 py-2 rounded-xl font-medium transition-all duration-200\n                  ${hasActiveFilters ? 'bg-blue-500 text-white shadow-lg' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}\n                `,\n              children: [/*#__PURE__*/_jsxDEV(SlidersHorizontal, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 17\n              }, this), \"L\\u1ECDc\", activeFilterCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 inline-flex items-center justify-center w-5 h-5 bg-white/20 backdrop-blur-sm text-xs rounded-full font-bold\",\n                children: activeFilterCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: loadTasks,\n              disabled: isLoading,\n              className: \"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 font-medium disabled:opacity-50\",\n              title: \"L\\xE0m m\\u1EDBi\",\n              children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n                className: `w-4 h-4 ${isLoading ? 'animate-spin' : ''}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCreateTask,\n              disabled: isLoading,\n              className: \"inline-flex items-center px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50\",\n              children: [/*#__PURE__*/_jsxDEV(Plus, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 17\n              }, this), \"T\\u1EA1o m\\u1EDBi\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this), showFilters && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/90 backdrop-blur-xl border-b border-gray-200/50 shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-6 py-5 space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative max-w-md\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-700 mb-2\",\n            children: \"T\\xECm ki\\u1EBFm c\\xF4ng vi\\u1EC7c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: filters.search,\n              onChange: handleSearchChange,\n              placeholder: \"T\\xECm theo ti\\xEAu \\u0111\\u1EC1 ho\\u1EB7c m\\xF4 t\\u1EA3...\",\n              className: \"w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/80 backdrop-blur-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this), filters.search && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setFilters(prev => ({\n                ...prev,\n                search: ''\n              })),\n              className: \"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200\",\n              children: /*#__PURE__*/_jsxDEV(X, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-3\",\n              children: \"Tr\\u1EA1ng th\\xE1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Target,\n                label: \"T\\u1EA5t c\\u1EA3\",\n                value: \"all\",\n                isActive: filters.status === 'all',\n                onClick: value => handleFilterChange('status', value),\n                color: \"gray\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Clock,\n                label: \"Ch\\u1EDD l\\xE0m\",\n                value: \"todo\",\n                isActive: filters.status === 'todo',\n                onClick: value => handleFilterChange('status', value),\n                color: \"amber\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Users,\n                label: \"\\u0110ang l\\xE0m\",\n                value: \"in_progress\",\n                isActive: filters.status === 'in_progress',\n                onClick: value => handleFilterChange('status', value),\n                color: \"blue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: CheckCircle2,\n                label: \"Ho\\xE0n th\\xE0nh\",\n                value: \"completed\",\n                isActive: filters.status === 'completed',\n                onClick: value => handleFilterChange('status', value),\n                color: \"emerald\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-3\",\n              children: \"\\u0110\\u1ED9 \\u01B0u ti\\xEAn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Filter,\n                label: \"T\\u1EA5t c\\u1EA3\",\n                value: \"all\",\n                isActive: filters.priority === 'all',\n                onClick: value => handleFilterChange('priority', value),\n                color: \"gray\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Flag,\n                label: \"Kh\\u1EA9n c\\u1EA5p\",\n                value: \"urgent\",\n                isActive: filters.priority === 'urgent',\n                onClick: value => handleFilterChange('priority', value),\n                color: \"red\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Flag,\n                label: \"Cao\",\n                value: \"high\",\n                isActive: filters.priority === 'high',\n                onClick: value => handleFilterChange('priority', value),\n                color: \"red\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Flag,\n                label: \"Trung b\\xECnh\",\n                value: \"medium\",\n                isActive: filters.priority === 'medium',\n                onClick: value => handleFilterChange('priority', value),\n                color: \"amber\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Flag,\n                label: \"Th\\u1EA5p\",\n                value: \"low\",\n                isActive: filters.priority === 'low',\n                onClick: value => handleFilterChange('priority', value),\n                color: \"blue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-3\",\n              children: \"Ng\\u01B0\\u1EDDi th\\u1EF1c hi\\u1EC7n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Users,\n                label: \"T\\u1EA5t c\\u1EA3\",\n                value: \"all\",\n                isActive: filters.assignedTo === 'all',\n                onClick: value => handleFilterChange('assignedTo', value),\n                color: \"gray\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: User,\n                label: \"C\\u1EE7a t\\xF4i\",\n                value: \"me\",\n                isActive: filters.assignedTo === 'me',\n                onClick: value => handleFilterChange('assignedTo', value),\n                color: \"purple\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: Users,\n                label: \"Ng\\u01B0\\u1EDDi kh\\xE1c\",\n                value: \"others\",\n                isActive: filters.assignedTo === 'others',\n                onClick: value => handleFilterChange('assignedTo', value),\n                color: \"blue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FilterOption, {\n                icon: AlertTriangle,\n                label: \"Ch\\u01B0a giao\",\n                value: \"unassigned\",\n                isActive: filters.assignedTo === 'unassigned',\n                onClick: value => handleFilterChange('assignedTo', value),\n                color: \"amber\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 13\n        }, this), hasActiveFilters && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between pt-4 border-t border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600\",\n            children: [\"Hi\\u1EC3n th\\u1ECB \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-gray-900\",\n              children: filteredTasks.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 28\n            }, this), \" /\", ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-gray-900\",\n              children: tasks.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 19\n            }, this), \" c\\xF4ng vi\\u1EC7c\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearAllFilters,\n            className: \"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200\",\n            children: \"X\\xF3a t\\u1EA5t c\\u1EA3 b\\u1ED9 l\\u1ECDc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-6 py-4 bg-red-50 border-b border-red-200\",\n      children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        message: error,\n        onRetry: loadTasks,\n        onDismiss: () => setError(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: taskListRef,\n      className: \"flex-1 overflow-y-auto\",\n      children: /*#__PURE__*/_jsxDEV(TaskList, {\n        tasks: filteredTasks,\n        isLoading: isLoading,\n        error: null,\n        currentUser: user,\n        onEditTask: handleEditTask,\n        onDeleteTask: deleteTask,\n        onRetryLoad: loadTasks,\n        onCreateTask: handleCreateTask\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 7\n    }, this), showTaskForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\",\n        children: /*#__PURE__*/_jsxDEV(TaskForm, {\n          task: editingTask,\n          currentUser: user,\n          onSave: handleTaskSave,\n          onCancel: handleCancelForm,\n          isLoading: isFormLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 9\n    }, this), isFormLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl p-8 shadow-2xl mx-4 max-w-sm w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold text-gray-900\",\n              children: editingTask ? 'Đang cập nhật...' : 'Đang tạo công việc...'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mt-1\",\n              children: \"Vui l\\xF2ng ch\\u1EDD trong gi\\xE2y l\\xE1t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 629,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 341,\n    columnNumber: 5\n  }, this);\n}\n_s2(TaskManagement, \"nqoxraQYkJOb/vElT1PWCXbrMAQ=\", false, function () {\n  return [useDebounce];\n});\n_c2 = TaskManagement;\nvar _c, _c2;\n$RefreshReg$(_c, \"FilterOption\");\n$RefreshReg$(_c2, \"TaskManagement\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Plus","Search","RotateCcw","SlidersHorizontal","X","Filter","Clock","CheckCircle2","AlertTriangle","Users","Flag","User","Target","TaskList","TaskForm","ErrorMessage","api","jsxDEV","_jsxDEV","useDebounce","value","delay","_s","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","FilterOption","icon","Icon","label","isActive","onClick","color","colorClasses","blue","emerald","amber","red","purple","gray","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","TaskManagement","user","onStatsUpdate","_s2","tasks","setTasks","isLoading","setIsLoading","error","setError","showTaskForm","setShowTaskForm","editingTask","setEditingTask","isFormLoading","setIsFormLoading","filters","setFilters","status","priority","search","assignedTo","showFilters","setShowFilters","debouncedSearch","taskListRef","id","loadTasks","console","log","response","getTasks","Array","isArray","warn","err","message","createTask","taskData","newTaskData","title","description","start_date","due_date","estimated_hours","assigned_to","category_id","department_id","createdTask","task","data","prev","current","scrollIntoView","behavior","Error","updateTask","updatedTask","map","deleteTask","taskId","originalTasks","filter","handleTaskSave","handleEditTask","handleCreateTask","handleCancelForm","handleFilterChange","filterType","handleSearchChange","e","target","clearAllFilters","getFilteredTasks","_task$title","_task$description","query","toLowerCase","titleMatch","includes","descriptionMatch","filteredTasks","getTaskStats","total","length","completed","t","inProgress","todo","overdue","Date","myTasks","stats","hasActiveFilters","activeFilterCount","Boolean","style","fontFamily","disabled","type","onChange","placeholder","onRetry","onDismiss","ref","currentUser","onEditTask","onDeleteTask","onRetryLoad","onCreateTask","onSave","onCancel","_c2","$RefreshReg$"],"sources":["D:/Stratix/frontend/src/components/Tasks/TaskManagement.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport {\r\n  Plus,\r\n  Search,\r\n  RotateCcw,\r\n  SlidersHorizontal,\r\n  X,\r\n  Filter,\r\n  Clock,\r\n  CheckCircle2,\r\n  AlertTriangle,\r\n  Users,\r\n  Flag,\r\n  User,\r\n  Target\r\n} from 'lucide-react';\r\nimport TaskList from './TaskLists';\r\nimport TaskForm from './TaskForm';\r\nimport ErrorMessage from '../Common/ErrorMessage';\r\n\r\n// Import API service\r\nimport { api } from '../../services/api';\r\n\r\n// Custom hook for debounced value\r\nconst useDebounce = (value, delay) => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n};\r\n\r\n// Filter Option Component\r\nconst FilterOption = ({ icon: Icon, label, value, isActive, onClick, color = \"blue\" }) => {\r\n  const colorClasses = {\r\n    blue: isActive ? 'bg-blue-500 text-white border-blue-500' : 'bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100',\r\n    emerald: isActive ? 'bg-emerald-500 text-white border-emerald-500' : 'bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100',\r\n    amber: isActive ? 'bg-amber-500 text-white border-amber-500' : 'bg-amber-50 text-amber-700 border-amber-200 hover:bg-amber-100',\r\n    red: isActive ? 'bg-red-500 text-white border-red-500' : 'bg-red-50 text-red-700 border-red-200 hover:bg-red-100',\r\n    purple: isActive ? 'bg-purple-500 text-white border-purple-500' : 'bg-purple-50 text-purple-700 border-purple-200 hover:bg-purple-100',\r\n    gray: isActive ? 'bg-gray-500 text-white border-gray-500' : 'bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100'\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={() => onClick(value)}\r\n      className={`\r\n        inline-flex items-center space-x-2 px-3 py-2 rounded-xl border transition-all duration-200\r\n        text-sm font-medium hover:scale-105 active:scale-95\r\n        ${colorClasses[color]}\r\n      `}\r\n    >\r\n      {Icon && <Icon className=\"w-4 h-4\" />}\r\n      <span>{label}</span>\r\n    </button>\r\n  );\r\n};\r\n\r\n// Quản lý Công việc (Task Management)\r\nexport default function TaskManagement({ user, onStatsUpdate }) {\r\n  // State quản lý danh sách công việc\r\n  const [tasks, setTasks] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // State cho modal TaskForm\r\n  const [showTaskForm, setShowTaskForm] = useState(false);\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [isFormLoading, setIsFormLoading] = useState(false);\r\n\r\n  // State cho bộ lọc và tìm kiếm\r\n  const [filters, setFilters] = useState({\r\n    status: 'all',\r\n    priority: 'all',\r\n    search: '',\r\n    assignedTo: 'all'\r\n  });\r\n\r\n  // State hiển thị bộ lọc\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  // Debounced search\r\n  const debouncedSearch = useDebounce(filters.search, 300);\r\n\r\n  // Ref để cuộn danh sách\r\n  const taskListRef = useRef(null);\r\n\r\n  // Tải công việc khi component mount / đổi user\r\n  useEffect(() => {\r\n    if (user?.id != null) {\r\n      loadTasks();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [user?.id]);\r\n\r\n  // Effect cho debounced search\r\n  useEffect(() => {\r\n    if (user?.id != null && debouncedSearch !== filters.search) {\r\n      // Có thể implement search qua API ở đây nếu cần\r\n      // loadTasks({ search: debouncedSearch });\r\n    }\r\n  }, [debouncedSearch, user?.id]);\r\n\r\n  // Lấy tất cả công việc từ server\r\n  const loadTasks = async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      console.log('Loading tasks for user:', user?.id);\r\n      const response = await api.getTasks();\r\n      console.log('Tasks response:', response);\r\n\r\n      if (response.tasks) {\r\n        setTasks(response.tasks);\r\n      } else if (Array.isArray(response)) {\r\n        setTasks(response);\r\n      } else {\r\n        console.warn('Unexpected response format:', response);\r\n        setTasks([]);\r\n      }\r\n\r\n      if (onStatsUpdate) onStatsUpdate();\r\n    } catch (err) {\r\n      console.error('Error loading tasks:', err);\r\n      setError(err.message || 'Không thể tải danh sách công việc. Vui lòng thử lại.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Tạo công việc mới\r\n  const createTask = async (taskData) => {\r\n    setIsFormLoading(true);\r\n\r\n    try {\r\n      console.log('Creating task:', taskData);\r\n\r\n      const newTaskData = {\r\n        title: taskData.title,\r\n        description: taskData.description || '',\r\n        status: taskData.status || 'todo',\r\n        priority: taskData.priority || 'medium',\r\n        start_date: taskData.start_date || null,\r\n        due_date: taskData.due_date || null,\r\n        estimated_hours: taskData.estimated_hours || null,\r\n        assigned_to: taskData.assigned_to || user.id,\r\n        category_id: taskData.category_id || null,\r\n        department_id: taskData.department_id || user.department_id\r\n      };\r\n\r\n      const response = await api.createTask(newTaskData);\r\n      console.log('Create task response:', response);\r\n\r\n      let createdTask;\r\n      if (response.task) {\r\n        createdTask = response.task;\r\n      } else if (response.data) {\r\n        createdTask = response.data;\r\n      } else {\r\n        createdTask = response;\r\n      }\r\n\r\n      setTasks(prev => [createdTask, ...prev]);\r\n      setShowTaskForm(false);\r\n      setEditingTask(null);\r\n\r\n      if (onStatsUpdate) onStatsUpdate();\r\n\r\n      if (taskListRef.current) {\r\n        taskListRef.current.scrollIntoView({ behavior: 'smooth' });\r\n      }\r\n\r\n      console.log('Task created successfully');\r\n    } catch (err) {\r\n      console.error('Error creating task:', err);\r\n      throw new Error(err.message || 'Không thể tạo công việc. Vui lòng thử lại.');\r\n    } finally {\r\n      setIsFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Cập nhật công việc\r\n  const updateTask = async (taskData) => {\r\n    setIsFormLoading(true);\r\n\r\n    try {\r\n      console.log('Updating task:', taskData);\r\n      const response = await api.updateTask(taskData.id, taskData);\r\n      console.log('Update task response:', response);\r\n\r\n      let updatedTask;\r\n      if (response.task) {\r\n        updatedTask = response.task;\r\n      } else if (response.data) {\r\n        updatedTask = response.data;\r\n      } else {\r\n        updatedTask = response;\r\n      }\r\n\r\n      setTasks(prev => prev.map(task => (task.id === updatedTask.id ? updatedTask : task)));\r\n      setShowTaskForm(false);\r\n      setEditingTask(null);\r\n\r\n      if (onStatsUpdate) onStatsUpdate();\r\n\r\n      console.log('Task updated successfully');\r\n    } catch (err) {\r\n      console.error('Error updating task:', err);\r\n      throw new Error(err.message || 'Không thể cập nhật công việc. Vui lòng thử lại.');\r\n    } finally {\r\n      setIsFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // Xóa công việc\r\n  const deleteTask = async (taskId) => {\r\n    console.log('Deleting task:', taskId);\r\n\r\n    const originalTasks = tasks;\r\n    setTasks(prev => prev.filter(task => task.id !== taskId));\r\n\r\n    try {\r\n      await api.deleteTask(taskId);\r\n      console.log('Task deleted successfully');\r\n      if (onStatsUpdate) onStatsUpdate();\r\n    } catch (err) {\r\n      console.error('Error deleting task:', err);\r\n      setTasks(originalTasks);\r\n      setError(err.message || 'Không thể xóa công việc. Vui lòng thử lại.');\r\n      setTimeout(() => setError(null), 5000);\r\n    }\r\n  };\r\n\r\n  // Handlers\r\n  const handleTaskSave = async (taskData) => {\r\n    if (editingTask) {\r\n      await updateTask(taskData);\r\n    } else {\r\n      await createTask(taskData);\r\n    }\r\n  };\r\n\r\n  const handleEditTask = (task) => {\r\n    setEditingTask(task);\r\n    setShowTaskForm(true);\r\n  };\r\n\r\n  const handleCreateTask = () => {\r\n    setEditingTask(null);\r\n    setShowTaskForm(true);\r\n  };\r\n\r\n  const handleCancelForm = () => {\r\n    setShowTaskForm(false);\r\n    setEditingTask(null);\r\n  };\r\n\r\n  // Filter handlers\r\n  const handleFilterChange = useCallback((filterType, value) => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      [filterType]: prev[filterType] === value ? 'all' : value\r\n    }));\r\n  }, []);\r\n\r\n  const handleSearchChange = (e) => {\r\n    setFilters(prev => ({ ...prev, search: e.target.value }));\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    setFilters({ status: 'all', priority: 'all', search: '', assignedTo: 'all' });\r\n    setShowFilters(false);\r\n  };\r\n\r\n  // Áp dụng bộ lọc\r\n  const getFilteredTasks = () => {\r\n    return tasks.filter(task => {\r\n      if (filters.status !== 'all' && task.status !== filters.status) return false;\r\n      if (filters.priority !== 'all' && task.priority !== filters.priority) return false;\r\n\r\n      if (filters.assignedTo !== 'all') {\r\n        if (filters.assignedTo === 'me' && task.assigned_to !== user.id) return false;\r\n        if (filters.assignedTo === 'others' && task.assigned_to === user.id) return false;\r\n        if (filters.assignedTo === 'unassigned' && task.assigned_to) return false;\r\n      }\r\n\r\n      if (debouncedSearch) {\r\n        const query = debouncedSearch.toLowerCase();\r\n        const titleMatch = task.title?.toLowerCase().includes(query);\r\n        const descriptionMatch = task.description?.toLowerCase().includes(query);\r\n        if (!titleMatch && !descriptionMatch) return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  };\r\n\r\n  const filteredTasks = getFilteredTasks();\r\n\r\n  // Thống kê nhanh\r\n  const getTaskStats = () => {\r\n    const total = tasks.length;\r\n    const completed = tasks.filter(t => t.status === 'completed').length;\r\n    const inProgress = tasks.filter(t => t.status === 'in_progress').length;\r\n    const todo = tasks.filter(t => t.status === 'todo').length;\r\n    const overdue = tasks.filter(t => {\r\n      if (!t.due_date || t.status === 'completed') return false;\r\n      return new Date(t.due_date) < new Date();\r\n    }).length;\r\n    const myTasks = tasks.filter(t => t.assigned_to === user.id).length;\r\n\r\n    return { total, completed, inProgress, todo, overdue, myTasks };\r\n  };\r\n\r\n  const stats = getTaskStats();\r\n\r\n  // Có đang bật bộ lọc không?\r\n  const hasActiveFilters =\r\n    filters.status !== 'all' ||\r\n    filters.priority !== 'all' ||\r\n    filters.search !== '' ||\r\n    filters.assignedTo !== 'all';\r\n\r\n  const activeFilterCount = [\r\n    filters.status !== 'all',\r\n    filters.priority !== 'all',\r\n    filters.search !== '',\r\n    filters.assignedTo !== 'all'\r\n  ].filter(Boolean).length;\r\n\r\n  return (\r\n    <div className=\"h-full bg-gradient-to-br from-gray-50 to-white\" style={{ fontFamily: 'Inter, sans-serif' }}>\r\n      {/* Compact Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-xl border-b border-gray-200/50 shadow-sm\">\r\n        <div className=\"px-6 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            {/* Title & Quick Stats */}\r\n            <div className=\"flex items-center space-x-8\">\r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-gray-900 mb-1\">Quản lý công việc</h1>\r\n                <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n                  <span>Tổng: <span className=\"font-semibold text-gray-900\">{stats.total}</span></span>\r\n                  <span>Hoàn thành: <span className=\"font-semibold text-emerald-600\">{stats.completed}</span></span>\r\n                  <span>Đang làm: <span className=\"font-semibold text-blue-600\">{stats.inProgress}</span></span>\r\n                  {stats.overdue > 0 && (\r\n                    <span>Trễ hạn: <span className=\"font-semibold text-red-600\">{stats.overdue}</span></span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex items-center space-x-3\">\r\n              {/* Filter Toggle */}\r\n              <button\r\n                onClick={() => setShowFilters(!showFilters)}\r\n                className={`\r\n                  relative inline-flex items-center px-4 py-2 rounded-xl font-medium transition-all duration-200\r\n                  ${hasActiveFilters\r\n                    ? 'bg-blue-500 text-white shadow-lg'\r\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }\r\n                `}\r\n              >\r\n                <SlidersHorizontal className=\"w-4 h-4 mr-2\" />\r\n                Lọc\r\n                {activeFilterCount > 0 && (\r\n                  <span className=\"ml-2 inline-flex items-center justify-center w-5 h-5 bg-white/20 backdrop-blur-sm text-xs rounded-full font-bold\">\r\n                    {activeFilterCount}\r\n                  </span>\r\n                )}\r\n              </button>\r\n\r\n              {/* Refresh */}\r\n              <button\r\n                onClick={loadTasks}\r\n                disabled={isLoading}\r\n                className=\"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 font-medium disabled:opacity-50\"\r\n                title=\"Làm mới\"\r\n              >\r\n                <RotateCcw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n              </button>\r\n\r\n              {/* Create Task */}\r\n              <button\r\n                onClick={handleCreateTask}\r\n                disabled={isLoading}\r\n                className=\"inline-flex items-center px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50\"\r\n              >\r\n                <Plus className=\"w-4 h-4 mr-2\" />\r\n                Tạo mới\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Beautiful Filters Panel */}\r\n      {showFilters && (\r\n        <div className=\"bg-white/90 backdrop-blur-xl border-b border-gray-200/50 shadow-sm\">\r\n          <div className=\"px-6 py-5 space-y-6\">\r\n            {/* Search Bar */}\r\n            <div className=\"relative max-w-md\">\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Tìm kiếm công việc\r\n              </label>\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  value={filters.search}\r\n                  onChange={handleSearchChange}\r\n                  placeholder=\"Tìm theo tiêu đề hoặc mô tả...\"\r\n                  className=\"w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/80 backdrop-blur-sm\"\r\n                />\r\n                {filters.search && (\r\n                  <button\r\n                    onClick={() => setFilters(prev => ({ ...prev, search: '' }))}\r\n                    className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Filter Options Grid */}\r\n            <div className=\"space-y-4\">\r\n              {/* Status Filters */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\r\n                  Trạng thái\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  <FilterOption\r\n                    icon={Target}\r\n                    label=\"Tất cả\"\r\n                    value=\"all\"\r\n                    isActive={filters.status === 'all'}\r\n                    onClick={(value) => handleFilterChange('status', value)}\r\n                    color=\"gray\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={Clock}\r\n                    label=\"Chờ làm\"\r\n                    value=\"todo\"\r\n                    isActive={filters.status === 'todo'}\r\n                    onClick={(value) => handleFilterChange('status', value)}\r\n                    color=\"amber\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={Users}\r\n                    label=\"Đang làm\"\r\n                    value=\"in_progress\"\r\n                    isActive={filters.status === 'in_progress'}\r\n                    onClick={(value) => handleFilterChange('status', value)}\r\n                    color=\"blue\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={CheckCircle2}\r\n                    label=\"Hoàn thành\"\r\n                    value=\"completed\"\r\n                    isActive={filters.status === 'completed'}\r\n                    onClick={(value) => handleFilterChange('status', value)}\r\n                    color=\"emerald\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Priority Filters */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\r\n                  Độ ưu tiên\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  <FilterOption\r\n                    icon={Filter}\r\n                    label=\"Tất cả\"\r\n                    value=\"all\"\r\n                    isActive={filters.priority === 'all'}\r\n                    onClick={(value) => handleFilterChange('priority', value)}\r\n                    color=\"gray\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={Flag}\r\n                    label=\"Khẩn cấp\"\r\n                    value=\"urgent\"\r\n                    isActive={filters.priority === 'urgent'}\r\n                    onClick={(value) => handleFilterChange('priority', value)}\r\n                    color=\"red\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={Flag}\r\n                    label=\"Cao\"\r\n                    value=\"high\"\r\n                    isActive={filters.priority === 'high'}\r\n                    onClick={(value) => handleFilterChange('priority', value)}\r\n                    color=\"red\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={Flag}\r\n                    label=\"Trung bình\"\r\n                    value=\"medium\"\r\n                    isActive={filters.priority === 'medium'}\r\n                    onClick={(value) => handleFilterChange('priority', value)}\r\n                    color=\"amber\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={Flag}\r\n                    label=\"Thấp\"\r\n                    value=\"low\"\r\n                    isActive={filters.priority === 'low'}\r\n                    onClick={(value) => handleFilterChange('priority', value)}\r\n                    color=\"blue\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Assignment Filters */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\r\n                  Người thực hiện\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  <FilterOption\r\n                    icon={Users}\r\n                    label=\"Tất cả\"\r\n                    value=\"all\"\r\n                    isActive={filters.assignedTo === 'all'}\r\n                    onClick={(value) => handleFilterChange('assignedTo', value)}\r\n                    color=\"gray\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={User}\r\n                    label=\"Của tôi\"\r\n                    value=\"me\"\r\n                    isActive={filters.assignedTo === 'me'}\r\n                    onClick={(value) => handleFilterChange('assignedTo', value)}\r\n                    color=\"purple\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={Users}\r\n                    label=\"Người khác\"\r\n                    value=\"others\"\r\n                    isActive={filters.assignedTo === 'others'}\r\n                    onClick={(value) => handleFilterChange('assignedTo', value)}\r\n                    color=\"blue\"\r\n                  />\r\n                  <FilterOption\r\n                    icon={AlertTriangle}\r\n                    label=\"Chưa giao\"\r\n                    value=\"unassigned\"\r\n                    isActive={filters.assignedTo === 'unassigned'}\r\n                    onClick={(value) => handleFilterChange('assignedTo', value)}\r\n                    color=\"amber\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Filter Summary & Actions */}\r\n            {hasActiveFilters && (\r\n              <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\r\n                <div className=\"text-sm text-gray-600\">\r\n                  Hiển thị <span className=\"font-semibold text-gray-900\">{filteredTasks.length}</span> /{' '}\r\n                  <span className=\"font-semibold text-gray-900\">{tasks.length}</span> công việc\r\n                </div>\r\n                <button\r\n                  onClick={clearAllFilters}\r\n                  className=\"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors duration-200\"\r\n                >\r\n                  Xóa tất cả bộ lọc\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <div className=\"px-6 py-4 bg-red-50 border-b border-red-200\">\r\n          <ErrorMessage\r\n            message={error}\r\n            onRetry={loadTasks}\r\n            onDismiss={() => setError(null)}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Task List - Remove onCreateTask prop since we handle it in header */}\r\n      <div ref={taskListRef} className=\"flex-1 overflow-y-auto\">\r\n        <TaskList\r\n          tasks={filteredTasks}\r\n          isLoading={isLoading}\r\n          error={null}\r\n          currentUser={user}\r\n          onEditTask={handleEditTask}\r\n          onDeleteTask={deleteTask}\r\n          onRetryLoad={loadTasks}\r\n          onCreateTask={handleCreateTask}\r\n        />\r\n      </div>\r\n      {showTaskForm && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <TaskForm\r\n              task={editingTask}\r\n              currentUser={user}\r\n              onSave={handleTaskSave}\r\n              onCancel={handleCancelForm}\r\n              isLoading={isFormLoading}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Form Loading Overlay */}\r\n      {isFormLoading && (\r\n        <div className=\"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-2xl p-8 shadow-2xl mx-4 max-w-sm w-full\">\r\n            <div className=\"flex flex-col items-center space-y-4\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent\"></div>\r\n              <div className=\"text-center\">\r\n                <div className=\"font-semibold text-gray-900\">\r\n                  {editingTask ? 'Đang cập nhật...' : 'Đang tạo công việc...'}\r\n                </div>\r\n                <div className=\"text-sm text-gray-600 mt-1\">Vui lòng chờ trong giây lát</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}